-------[ 2021-01-01 00:00:00 ]

bb.A_pvy = 0
bb.B_pvy = 0

bb.use_beampos = 0

#bb.magdist = 1.8
#bb.tracker_pitch_angle = 10.

# GEM origin coordinates for SBS-1 kinematics
bb.gemorigin_xyz = -0.2122 0.0322 3.0053
bb.gemtheta = 8.81 # degrees
bb.gemphi   = 180.45 # degrees

# Test: put GEM at "ideal" coordinates except for y offset:
# see how well sim. optics performs:
#bb.gemorigin_xyz = -0.2111 0.0322 3.0053

#bb.gemtheta = 10.0 
#bb.gemphi = 180.0

## optics parameters:
bb.optics_order = 2

#bb.optics_parameters = 
#  -0.0014629237  0.00037941994 -0.00095754244      0.2769191  0 0 0 0 0
#     0.52289143 -0.00072568509   0.0014194667     0.12177326  1 0 0 0 0
#     -0.0429585  -0.0060262058    0.013197044   -0.016461798  2 0 0 0 0
#    0.010777049   -0.030891294      1.0663789  -0.0033243495  0 1 0 0 0
#    -0.43315873     0.21685553    -0.35678525    0.014664485  1 1 0 0 0
#   -0.018992325   -0.037021977    0.081828146     0.26649178  0 2 0 0 0
#     -0.4138084  -0.0034560373    0.009090184   -0.062998296  0 0 1 0 0
#    0.051872706    0.014344192   -0.031155785    0.050567745  1 0 1 0 0
#     0.28964757     -0.2536192     0.47431456   -0.022839649  0 1 1 0 0
#   -0.005425351    0.003797722  -0.0078801984   0.0075681776  0 0 2 0 0
#   -0.014876018     0.99904964      -2.666626   0.0013908722  0 0 0 1 0
#      1.1226647    -0.34170577     0.44981824   -0.021462722  1 0 0 1 0
#    0.093601185    0.095753028    -0.20834281    -0.43485582  0 1 0 1 0
#    -0.83735284     0.47556083    -0.82781209    0.019590082  0 0 1 1 0
#   -0.051185974   -0.057646576     0.12923726     0.17177893  0 0 0 2 0
#  5.9533565e-16 -8.8307616e-16  1.6111156e-15 -2.5115108e-14  0 0 0 0 1
# -9.0017103e-17 -2.7484323e-15  6.3413659e-15 -9.5467346e-14  1 0 0 0 1
# -5.9739436e-15  2.4265842e-15 -6.4499996e-15   4.516025e-15  0 1 0 0 1
# -2.7689762e-15  3.9845049e-16 -2.3538082e-15 -3.1248326e-14  0 0 1 0 1
# -2.3741486e-15  8.5392922e-16 -2.3580607e-15  2.3118034e-15  0 0 0 1 1
#   4.344296e-15 -1.2879984e-15  3.9146744e-15  1.2162675e-15  0 0 0 0 2

# scaled simulation optics, SBS-1 kinematics:
bb.optics_parameters = 
   -0.014648478  9.2888779e-05 -0.00028384801     0.26792745  0 0 0 0 0
     0.45489388   0.0012370654   -0.002972144     0.12160704  1 0 0 0 0
   -0.032203776   0.0033872756  -0.0068735758   -0.017499924  2 0 0 0 0
   0.0075285342   -0.027680404      1.0646037   0.0023734059  0 1 0 0 0
    -0.17444389     0.12471081     -0.2358848    0.010951956  1 1 0 0 0
   0.0064272453    0.049341224   -0.085804162     0.09175745  0 2 0 0 0
    -0.36392268  -0.0016756369   0.0045578207   -0.066694469  0 0 1 0 0
    0.042804806   -0.011090823     0.02077952    0.049864893  1 0 1 0 0
     0.12659709    -0.20279798     0.47125088   -0.018754319  0 1 1 0 0
  -0.0073136032   0.0046097496  -0.0069415866    0.016885366  0 0 2 0 0
   -0.019269868     0.98877439     -2.9284859  -0.0030676435  0 0 0 1 0
     0.48896519    -0.29274099     0.49157929   -0.019691589  1 0 0 1 0
    0.021728534     -0.2401849     0.40208086   -0.025483334  0 1 0 1 0
    -0.37412069     0.58587298     -1.3242557    0.036218813  0 0 1 1 0
   0.0019082509     0.29567774    -0.47302795    -0.12511339  0 0 0 2 0
  3.7503079e-16   7.902824e-16 -2.7955172e-16  -4.110295e-15  0 0 0 0 1
 -8.4120349e-17  -9.966935e-17  1.8352942e-17  6.4052857e-16  1 0 0 0 1
 -8.1051437e-17 -1.2618543e-16 -2.0149278e-16 -4.0746041e-16  0 1 0 0 1
 -2.9598011e-16  1.0733965e-16 -8.6145775e-17  4.4703935e-15  0 0 1 0 1
 -1.4758179e-17  6.6168751e-17 -2.7328371e-17   4.322175e-16  0 0 0 1 1
   2.675701e-17   6.815644e-17   1.987716e-17  1.3165776e-16  0 0 0 0 2


## track constraint widths:
bb.frontconstraintwidth_x = 0.7 # m
bb.frontconstraintwidth_y = 0.2 # m
bb.backconstraintwidth_x = 0.05 # m
bb.backconstraintwidth_y = 0.05 # m
bb.backconstraint_x0 = 0.0 
bb.backconstraint_y0 = 0.0
bb.frontconstraint_x0 = 0.0
bb.frontconstraint_y0 = 0.0

# shower gives the best position resolution of "rear" detectors:
bb.xsigma_shower = 0.016
bb.ysigma_shower = 0.016 
bb.xsigma_preshower = 0.026
bb.ysigma_preshower = 100.0 # don't use preshower y coordinate in constraint point calculation at all.
bb.xsigma_hodo = 0.021
bb.ysigma_hodo = 0.0425

--------[ 2021-10-15 09:00:00 ] # first runs in SBS-1 after sieve removed

#bb.frontconstraintwidth_x = 0.075 # m
#bb.frontconstraintwidth_y = 0.056 # m
#bb.backconstraintwidth_x = 0.045 # m
#bb.backconstraintwidth_y = 0.053 # m

bb.frontconstraintwidth_x = 0.107629
bb.frontconstraintwidth_y = 0.0699422
bb.backconstraintwidth_x = 0.0544505
bb.backconstraintwidth_y = 0.0696305

#bb.frontconstraint_x0 = 0.055
#bb.frontconstraint_y0 = -0.014
#bb.backconstraint_x0 = 0.0055
#bb.backconstraint_y0 = 0.0

bb.frontconstraint_x0 = 0.0588
bb.frontconstraint_y0 = -0.0141
bb.backconstraint_x0 = 0.0061
bb.backconstraint_y0 = 0.0004

--------[ 2021-01-01 00:00:00 ]

bb.ecalo_fudgefactor = 1.0

#bb.do_pid = 1

trackgrinchcorr_const = -0.44160517
trackgrinchcorr_slope = 0.90774908
trackgrinchcorr_sigma = 0.25

psshPIDprobatable = 
0   0   1
0.01   0.0102965   0.939074
0.02   0.0160108   0.672653
0.03   0.0223125   0.503606
0.04   0.0294634   0.438879
0.05   0.038083   0.403123
0.06   0.0484862   0.376816
0.07   0.0606839   0.356052
0.08   0.075664   0.33765
0.09   0.0928656   0.32209
0.1   0.113875   0.309052
0.11   0.137282   0.295641
0.12   0.163355   0.28374
0.13   0.192386   0.272354
0.14   0.223323   0.26223
0.15   0.257182   0.252123
0.16   0.293438   0.241856
0.17   0.331436   0.232353
0.18   0.371366   0.22253
0.19   0.411975   0.213329
0.2   0.453423   0.203489
0.21   0.494475   0.194661
0.22   0.535485   0.186738
0.23   0.575672   0.177555
0.24   0.614038   0.169296
0.25   0.652233   0.161427
0.26   0.688602   0.152457
0.27   0.722786   0.144446
0.28   0.754348   0.137163
0.29   0.784175   0.130005
0.3   0.811428   0.123273
0.31   0.836709   0.117091
0.32   0.85946   0.111567
0.33   0.879973   0.106078
0.34   0.897719   0.100767
0.35   0.913821   0.0951011
0.36   0.927423   0.0903407
0.37   0.939257   0.0858112
0.38   0.949244   0.0811752
0.39   0.957853   0.0770898
0.4   0.965196   0.0731109
0.41   0.971311   0.06899
0.42   0.976422   0.0649579
0.43   0.980934   0.0613343
0.44   0.984507   0.0576219
0.45   0.987423   0.0541405
0.46   0.98973   0.0507123
0.47   0.991824   0.0476926
0.48   0.993223   0.0445309
0.49   0.994376   0.0421507
0.5   0.995338   0.0396639
0.51   0.996016   0.0371772
0.52   0.996662   0.0348325
0.53   0.99717   0.0327187
0.54   0.997533   0.0308359
0.55   0.997832   0.0290774
0.56   0.998147   0.0272301
0.57   0.998393   0.0256492
0.58   0.998622   0.0237841
0.59   0.998793   0.0222033
0.6   0.999007   0.0204803
0.61   0.999167   0.0191303
0.62   0.999242   0.0177626
0.63   0.999311   0.0166081
0.64   0.999455   0.0154712
0.65   0.999503   0.0144055
0.66   0.999589   0.013393
0.67   0.999658   0.0124516
0.68   0.999706   0.0115812
0.69   0.999744   0.0108707
0.7   0.999786   0.0097872
0.71   0.999802   0.00888131
0.72   0.999829   0.00809975
0.73   0.99985   0.00733596
0.74   0.999888   0.00666098
0.75   0.999893   0.005986
0.76   0.99992   0.00538207
0.77   0.999941   0.00468933
0.78   0.999947   0.00438737
0.79   0.999963   0.00392554
0.8   0.999963   0.00335714
0.81   0.999968   0.00294859
0.82   0.999984   0.00261111
0.83   0.999989   0.00236243
0.84   0.999989   0.00198941
0.85   0.999995   0.00177626
0.86   0.999995   0.00154535
0.87   0.999995   0.00126115
0.88   0.999995   0.000923656
0.89   1   0.000834843
0.9   1   0.000603929
0.91   1   0.00040854
0.92   1   0.000319727
0.93   1   0.000248677
0.94   1   0.000195389
0.95   1   0.000124338
0.96   1   5.32879e-05
0.97   1   3.55252e-05
0.98   1   1.77626e-05
0.99   1   1.77626e-05

pcalPIDprobatable = 
0   0   1
0.01   0   1
0.02   0   1
0.03   0   1
0.04   0   1
0.05   0   1
0.06   0   1
0.07   0   1
0.08   0   1
0.09   0   1
0.1   0   1
0.11   0   1
0.12   0   1
0.13   0   1
0.14   0   1
0.15   0   1
0.16   0   1
0.17   0   1
0.18   0   1
0.19   0   1
0.2   0   1
0.21   0   1
0.22   0   1
0.23   0   1
0.24   0   0.999536
0.25   0   0.997875
0.26   0   0.995036
0.27   0   0.990768
0.28   0   0.985536
0.29   0   0.979768
0.3   0   0.973768
0.31   0   0.966143
0.32   0   0.958447
0.33   0   0.949251
0.34   0   0.93934
0.35   0   0.929126
0.36   0   0.917662
0.37   0   0.905752
0.38   0   0.894359
0.39   0   0.88052
0.4   0   0.865949
0.41   0   0.851538
0.42   0   0.836128
0.43   0   0.820467
0.44   0   0.803539
0.45   0   0.78654
0.46   0   0.769326
0.47   0   0.750862
0.48   0   0.732255
0.49   0   0.713737
0.5   0   0.693898
0.51   5.35739e-06   0.672399
0.52   5.35739e-06   0.650381
0.53   5.35739e-06   0.628917
0.54   2.6787e-05   0.607721
0.55   4.28591e-05   0.585579
0.56   0.00010179   0.562758
0.57   0.000192866   0.540401
0.58   0.000353588   0.518544
0.59   0.000546454   0.49617
0.6   0.000776822   0.473474
0.61   0.00105541   0.450135
0.62   0.00132328   0.428332
0.63   0.00173579   0.407153
0.64   0.0021751   0.386582
0.65   0.00266262   0.365886
0.66   0.00320372   0.344851
0.67   0.00383053   0.32578
0.68   0.00444128   0.30687
0.69   0.00499309   0.289013
0.7   0.00572169   0.271977
0.71   0.00659495   0.25521
0.72   0.00748963   0.240156
0.73   0.0084111   0.22596
0.74   0.00935401   0.211782
0.75   0.0105005   0.198121
0.76   0.0118291   0.184979
0.77   0.0131417   0.172675
0.78   0.0148185   0.160747
0.79   0.0165972   0.148747
0.8   0.0184187   0.13823
0.81   0.0205938   0.128391
0.82   0.0232725   0.118605
0.83   0.0260101   0.109212
0.84   0.0290317   0.100462
0.85   0.0325622   0.0925698
0.86   0.0363445   0.0844985
0.87   0.0407001   0.0770165
0.88   0.0459128   0.0697309
0.89   0.0518863   0.0626239
0.9   0.059001   0.0559276
0.91   0.0681728   0.0494098
0.92   0.0803019   0.0439278
0.93   0.0971938   0.0385529
0.94   0.122272   0.034053
0.95   0.158214   0.029303
0.96   0.211429   0.0245174
0.97   0.282592   0.0204103
0.98   0.372987   0.0165354
0.99   0.477767   0.0135176
1   0.58769   0.010482
1.01   0.69278   0.00758915
1.02   0.784311   0.00539276
1.03   0.857649   0.00346422
1.04   0.910724   0.00207139
1.05   0.947958   0.0014464
1.06   0.971734   0.000749987
1.07   0.986703   0.000285709
1.08   0.99521   7.14273e-05
1.09   0.999111   0
1.1   0.999952   0
1.11   0.999979   0
1.12   0.999989   0
1.13   0.999989   0
1.14   0.999995   0
1.15   1   0

bb.grinchPIDpbins = 2.7  2.9  3.2  3.5  4  5  

grinchPIDprobatable = 
0   0   1   1   1   1   1   1
1   0.000750035   0.708333   0.981651   1   0.999186   0.997845   0.994909
2   0.000808966   0.319444   0.834862   0.982544   0.994304   0.997845   0.994431
3   0.000851825   0.0555556   0.518349   0.900249   0.982099   0.996337   0.99353
4   0.000975045   0   0.238532   0.660848   0.892596   0.984702   0.990295
5   0.00236797   0   0.0275229   0.351621   0.6786   0.914674   0.976771
6   0.0104201   0   0   0.0997506   0.380797   0.727645   0.924798
7   0.0489719   0   0   0.00997506   0.135069   0.431157   0.768244
8   0.166047   0   0   0.00498753   0.0358015   0.176255   0.505622
9   0.390345   0   0   0.00249377   0.0081367   0.0551605   0.257478
10   0.652493   0   0   0.00249377   0.00732303   0.0165913   0.0995969
11   0.849168   0   0   0.00249377   0.00650936   0.00948072   0.0320322
12   0.942247   0   0   0.00249377   0.00569569   0.00689507   0.0132584
13   0.973031   0   0   0.00249377   0.00488202   0.00474036   0.0093339
14   0.980735   0   0   0.00249377   0.00406835   0.00387847   0.00768986
15   0.983269   0   0   0   0.00244101   0.00301659   0.00636402
16   0.985123   0   0   0   0.00162734   0.00237018   0.00546245
17   0.986821   0   0   0   0.00081367   0.00172377   0.00456088
18   0.988594   0   0   0   0.00081367   0.00129282   0.00355325
19   0.990105   0   0   0   0.00081367   0.000646412   0.00270471
20   0.99153   0   0   0   0   0.000646412   0.00222741
21   0.992655   0   0   0   0   0.000430942   0.00180314
22   0.99363   0   0   0   0   0.000430942   0.00148494
23   0.994402   0   0   0   0   0.000430942   0.00132584
24   0.995012   0   0   0   0   0.000430942   0.00121977
25   0.995634   0   0   0   0   0.000430942   0.00116674
26   0.996127   0   0   0   0   0.000430942   0.00116674
27   0.996609   0   0   0   0   0.000430942   0.00116674
28   0.99693   0   0   0   0   0.000215471   0.00106067
29   0.997241   0   0   0   0   0.000215471   0.00106067
30   0.997573   0   0   0   0   0.000215471   0.00090157
31   0.997798   0   0   0   0   0   0.000848536
32   0.998012   0   0   0   0   0   0.000795503
33   0.998157   0   0   0   0   0   0.000689436
34   0.998302   0   0   0   0   0   0.000689436
35   0.998457   0   0   0   0   0   0.000636402
36   0.998612   0   0   0   0   0   0.000636402
37   0.998768   0   0   0   0   0   0.000636402
38   0.998891   0   0   0   0   0   0.000583369
39   0.998977   0   0   0   0   0   0.000530335
40   0.999046   0   0   0   0   0   0.000477302
41   0.999132   0   0   0   0   0   0.000424268
42   0.999239   0   0   0   0   0   0.000318201
43   0.999314   0   0   0   0   0   0.000318201
44   0.999384   0   0   0   0   0   0.000318201
45   0.999427   0   0   0   0   0   0.000318201
46   0.999459   0   0   0   0   0   0.000212134
47   0.999496   0   0   0   0   0   0.000212134
48   0.999523   0   0   0   0   0   0.000159101
49   0.999582   0   0   0   0   0   0.000106067

--------[ 2021-10-10 22:39:00 ]
# g4sbs 2nd-order starting optics model for BB distance = 1.85 m, current 750 A, angle = 51.0 degrees (added by AJRP). This should work better than the default model above, but we are still flying blind due to the lack of survey info in the final SBS-1 kinematics

#bb.tracker_pitch_angle = 10.22

bb.optics_order = 2

# slightly better version of SBS-1 optics with more accurate scale factor for simulation field:
#bb.optics_parameters = 
#   -0.014610131  0.00017530728 -0.00039557259     0.27014683  0 0 0 0 0
#     0.45492532   0.0013420436  -0.0031322852     0.12263747  1 0 0 0 0
#   -0.033084639   0.0019269196   -0.003110492   -0.019948636  2 0 0 0 0
#   0.0075938232   -0.031607257      1.0732355   0.0035087727  0 1 0 0 0
#    -0.17425312     0.11658231    -0.21478622   0.0016165883  1 1 0 0 0
#  -0.0059229514   -0.027663009    0.036262367    0.099444276  0 2 0 0 0
#    -0.36418362  -0.0024062888   0.0057744968   -0.067598058  0 0 1 0 0
#    0.045826096  -0.0068087258   0.0095609702    0.059928015  1 0 1 0 0
#     0.12277724    -0.16990165     0.40416301  -0.0047219173  0 1 1 0 0
#  -0.0093677811   0.0038706949  -0.0036022512   0.0028185913  0 0 2 0 0
#   -0.019564786     0.99289825     -2.9372276  -0.0054259747  0 0 0 1 0
#     0.48668258    -0.26638183     0.43247601     0.00139445  1 0 0 1 0
#    0.083491151      0.1370397    -0.16982932  -0.0068146927  0 1 0 1 0
#    -0.36371334     0.52513737     -1.2019374   0.0068090428  0 0 1 1 0
#   -0.082600543    -0.16508635      0.1785205    -0.15213115  0 0 0 2 0
# -9.6140311e-16  9.2605663e-17  -1.357631e-15 -1.0943194e-14  0 0 0 0 1
# -2.1436212e-16  1.9389511e-16  2.1026365e-16  3.8920755e-15  1 0 0 0 1
#  2.2572645e-16 -3.5722312e-17  1.5761084e-16 -3.6675353e-15  0 1 0 0 1
# -4.6911865e-17  -2.405119e-18  1.5525669e-16   1.333243e-15  0 0 1 0 1
#  3.8674907e-16   8.137218e-17  1.4831082e-16 -5.2351365e-15  0 0 0 1 1
#  4.5026307e-17  5.8408047e-17 -8.6377048e-17 -1.5141878e-15  0 0 0 0 2

# Optimized angle and vertex reconstruction results for SBS-1 by Holly S.-Vance: 
# See https://sbs.jlab.org/cgi-bin/DocDB/private/ShowDocument?docid=136 
# and also https://logbooks.jlab.org/entry/3942893
bb.preconflag = 1
# NOTE on new momentum reconstruction formalism: 1st-order momentum is calculated from
#   p*thetabend = A_pth1*(1.0 + (B_pth1+C_pth1*bb.magdist)*thtgt)
# and momentum expansion coefficients are for delta = p(first order) * (1+delta)
# In most of the acceptance we don't need any corrections beyond the first-order model

bb.A_pth1 =     0.269072661
bb.B_pth1 =      1.05403892
bb.C_pth1 = 0.0

#NOTE: angle and vertex reconstruction coefficients are from newfit_sbs1.dat

bb.optics_parameters = 
    -0.017446109   -0.0011365009   0.00078762704               0    0 0 0 0 0 
      0.44650375    0.0015290496    0.0023825667               0    1 0 0 0 0 
    -0.029787292    0.0038712622   -0.0086062769               0    2 0 0 0 0 
      0.01050181    -0.052614963       1.1483584               0    0 1 0 0 0 
     -0.18216041      0.15905763     -0.34730417               0    1 1 0 0 0 
     0.042033489       0.2534418    -0.052103188               0    0 2 0 0 0 
     -0.35358402   -0.0062595527   -0.0070129757               0    0 0 1 0 0 
     0.044435768    0.0035853569     0.030792449               0    1 0 1 0 0 
      0.16580897     -0.18773997      0.64361873               0    0 1 1 0 0 
     -0.05387635    -0.021167418    -0.043944185               0    0 0 2 0 0 
    -0.026077177       1.0432119      -3.0513707               0    0 0 0 1 0 
      0.49084142     -0.23137723      0.39107269               0    1 0 0 1 0 
     -0.11779895     -0.90196498      0.36537118               0    0 1 0 1 0 
     -0.42899534      0.24511361     -0.87805162               0    0 0 1 1 0 
      0.20091244       1.1236912     -0.76468212               0    0 0 0 2 0 
  -9.6140311e-16   -1.357631e-15   9.2605663e-17               0    0 0 0 0 1 
  -2.1436212e-16   2.1026365e-16   1.9389511e-16               0    1 0 0 0 1 
   2.2572645e-16   1.5761084e-16  -3.5722312e-17               0    0 1 0 0 1 
  -4.6911865e-17   1.5525669e-16   -2.405119e-18               0    0 0 1 0 1 
   3.8674907e-16   1.4831082e-16    8.137218e-17               0    0 0 0 1 1 
   4.5026307e-17  -8.6377048e-17   5.8408047e-17               0    0 0 0 0 2 


bb.forwardoptics_order = 2

bb.forwardoptics_parameters =
      0.19037746     0.0080080281       0.18250578     0.0024734719  0 0 0 0 0
       3.0107295    -0.0029053165       0.92288645    -0.0010827398  1 0 0 0 0
      0.35558734     -0.051467243      -0.05120924     -0.027789684  2 0 0 0 0
    0.0035821499        2.9120756      0.014128679        1.1185884  0 1 0 0 0
     0.015297604      -0.18408819     -0.017124939       -0.4077157  1 1 0 0 0
       -1.060209       -1.7048022      -0.68782594      -0.68340463  0 2 0 0 0
   -0.0091292694       0.96533069     0.0023894125      0.055067133  0 0 1 0 0
      0.78365036      -0.38402835      -0.08287885      -0.31070497  1 0 1 0 0
     -0.67641702       -1.6038627      -0.50666559      -0.56944501  0 1 1 0 0
     -0.14714929      -0.64109193     -0.087894301      -0.25405125  0 0 2 0 0
     -0.24574973     -0.012430695      -0.28995489    -0.0028782894  0 0 0 1 0
     -0.19852684    -0.0002502061      -0.19999152    0.00010158146  1 0 0 1 0
   -0.0012842542      0.041963746     -0.017967241     -0.030822865  0 1 0 1 0
      0.00977393      0.054017744    -0.0058845889      -0.01542169  0 0 1 1 0
     0.017353362     0.0055951241     0.0090279969     0.0011906484  0 0 0 2 0
  -7.7437167e-13   -2.1655843e-13    3.3003775e-13    -1.502734e-14  0 0 0 0 1
   2.4301473e-12    8.6226534e-13    5.5788222e-13    2.2525937e-13  1 0 0 0 1
  -7.1465835e-12   -3.0072069e-12   -1.9015232e-12   -7.9651216e-13  0 1 0 0 1
   2.9761131e-12    1.5799447e-12    8.7055108e-13    3.7347713e-13  0 0 1 0 1
   1.3414592e-12    4.4593626e-13    2.9641838e-13    1.0860713e-13  0 0 0 1 1
   3.5591917e-13    1.0168499e-13    1.6015734e-13    2.3118863e-14  0 0 0 0 2

--------[ 2021-10-21 00:00:00 ] # start of SBS-4 kinematics: 

#bb.frontconstraintwidth_x = 0.0665084
#bb.frontconstraintwidth_y = 0.0571508
#bb.backconstraintwidth_x = 0.0503008
#bb.backconstraintwidth_y = 0.064012

bb.frontconstraintwidth_x = 0.1
bb.frontconstraintwidth_y = 0.06
bb.backconstraintwidth_x = 0.055
bb.backconstraintwidth_y = 0.06

bb.frontconstraint_x0 = 0.052
bb.frontconstraint_y0 = -0.0154
bb.backconstraint_x0 = 0.0041
bb.backconstraint_y0 = 0.0002

# 2nd-order g4sbs optics model for SBS-4 kinematics with BB at 1.80 m, 750 A, angle = 36 degrees. We will update again soon after detailed optics analysis:

#bb.tracker_pitch_angle = 10.22

# updated SBS-4 GEM origin coordinates with straight-track analysis from Holly:
bb.gemorigin_xyz = -0.210082 0.0422169 2.95157
bb.gemtheta = 8.7746 # degrees
bb.gemphi = 179.351  # degrees

# note: ZSIEVE = 1.4261 m in this analysis

#bb.magdist = 

# new SBS-4 optics with more accurate scale factor for simulation magnetic field
#bb.optics_order = 2
#bb.optics_parameters = 
#   -0.015027398  0.00018765968 -0.00051374028     0.27672916  0 0 0 0 0
#     0.46546107   0.0010612757  -0.0023928759    0.098499642  1 0 0 0 0
#   -0.033570945   0.0024086193  -0.0051957876    0.035624703  2 0 0 0 0
#    0.011999017   -0.022931895      1.0480724   0.0031582119  0 1 0 0 0
#    -0.31217021     0.10253566    -0.19688936    0.017506889  1 1 0 0 0
#    0.044763124    -0.18510178     0.53582215     0.12650382  0 2 0 0 0
#    -0.37232662  -0.0019173326   0.0039637876   0.0095627859  0 0 1 0 0
#     0.04359432   -0.009755742    0.017576799    -0.25875063  1 0 1 0 0
#     0.24261546    -0.18601189     0.48521885   -0.029123862  0 1 1 0 0
#  -0.0036788796    0.011818765   -0.013979089     0.49486205  0 0 2 0 0
#    -0.03111767     0.97113338     -2.8283345  -0.0048343158  0 0 0 1 0
#     0.85808879    -0.29683077     0.53406348   -0.042570278  1 0 0 1 0
#     -0.1699298     0.94486501     -2.7837873    -0.26910341  0 1 0 1 0
#     -0.6850525      0.6689666     -1.6517048    0.064599412  0 0 1 1 0
#     0.24378982     -1.2210971      3.6570637     0.19137124  0 0 0 2 0
# -4.1945469e-16  7.6650637e-15 -2.8419043e-15 -8.9913795e-15  0 0 0 0 1
# -1.3191252e-15 -4.2604441e-15  5.1618826e-15 -1.3562711e-14  1 0 0 0 1
# -4.8639232e-18 -8.9677709e-17    1.48821e-17 -4.9251652e-17  0 1 0 0 1
# -3.4881436e-16 -8.8844235e-16  1.3562925e-15 -7.0410442e-15  0 0 1 0 1
# -2.1275432e-17  4.8910742e-16  8.4221738e-17  1.5411584e-15  0 0 0 1 1
# -8.2962594e-17   3.055217e-16 -1.1158777e-16  5.1719949e-16  0 0 0 0 2

# optimized SBS-4 optics by Holly: 

# see: https://sbs.jlab.org/cgi-bin/DocDB/private/ShowDocument?docid=155

bb.preconflag = 1
# NOTE on new momentum reconstruction formalism: 1st-order momentum is calculated from
#   p*thetabend = A_pth1*(1.0 + (B_pth1+C_pth1*bb.magdist)*thtgt)
# and momentum expansion coefficients are for delta = p(first order) * (1+delta)
# In most of the acceptance we don't need any corrections beyond the first-order model

#bb.A_pth1 =     0.271495549
#bb.B_pth1 =      1.02274415
#bb.C_pth1 = 0.0

# New momentum calibration SBS-4 SBS 30-percent for pass 2:
bb.A_pth1 =     0.272702433
bb.B_pth1 =      1.01298458
bb.C_pth1 = 0.0



#NOTE: angle and vertex reconstruction coefficients are from newfit_sbs4.dat

bb.optics_order = 2
bb.optics_parameters = 
     -0.01797485  -0.00046124219    0.0010911736               0    0 0 0 0 0 
      0.45582214  -0.00096052863    0.0017924612               0    1 0 0 0 0 
    -0.031349557    0.0040125907   -0.0030236419               0    2 0 0 0 0 
     0.017577667    -0.056859707       1.1200097               0    0 1 0 0 0 
     -0.32863556      0.10132075     -0.24421395               0    1 1 0 0 0 
     0.057888901     -0.11078315      0.14817166               0    0 2 0 0 0 
     -0.35199856    0.0041524464    -0.005687481               0    0 0 1 0 0 
     0.038560329    -0.019500581     0.015490154               0    1 0 1 0 0 
      0.24986237     -0.15384735       0.4846566               0    0 1 1 0 0 
    -0.015393866     0.021231714   -0.0025673602               0    0 0 2 0 0 
    -0.047532665       1.0576548      -2.9773667               0    0 0 0 1 0 
      0.86959634      -0.2322911       0.4053706               0    1 0 0 1 0 
      -0.1909724      0.40956777     -0.31552673               0    0 1 0 1 0 
      -0.6473745      0.41948171      -1.1311216               0    0 0 1 1 0 
      0.31193275     -0.41579778     -0.13209268               0    0 0 0 2 0 
  -4.1945469e-16  -2.8419043e-15   7.6650637e-15               0    0 0 0 0 1 
  -1.3191252e-15   5.1618826e-15  -4.2604441e-15               0    1 0 0 0 1 
  -4.8639232e-18     1.48821e-17  -8.9677709e-17               0    0 1 0 0 1 
  -3.4881436e-16   1.3562925e-15  -8.8844235e-16               0    0 0 1 0 1 
  -2.1275432e-17   8.4221738e-17   4.8910742e-16               0    0 0 0 1 1 
  -8.2962594e-17  -1.1158777e-16    3.055217e-16               0    0 0 0 0 2 

bb.forwardoptics_order = 2

bb.forwardoptics_parameters =
      0.17685444    -0.0016017284       0.17658327   -0.00035583821  0 0 0 0 0
       2.9915032    -0.0024512371       0.99771228     0.0011494792  1 0 0 0 0
      0.38495279     -0.012824025      0.013649278   -0.00068771936  2 0 0 0 0
     0.011239097        2.9216275    0.00052986945        1.0924387  0 1 0 0 0
     0.015520175       0.27284782   -0.00072087678      -0.10725858  1 1 0 0 0
     -0.63933112       0.30009799     -0.060101267       0.14515785  0 2 0 0 0
     0.010220247        1.0237507   -0.00061121268       0.06166774  0 0 1 0 0
       1.4646398      -0.14012394     0.0045422671      -0.15174499  1 0 1 0 0
     -0.28653867      0.061071562     0.0014664908       0.18529887  0 1 1 0 0
     -0.12126659       0.14274188    -0.0083126878       0.10180629  0 0 2 0 0
     -0.21556349     0.0045276721      -0.27638273     0.0017542405  0 0 0 1 0
     -0.23687862   -0.00058407395      -0.27784726    -0.0032442091  1 0 0 1 0
   -0.0024877754      0.026183014    0.00059098758      0.013604222  0 1 0 1 0
    -0.015032685      0.023978346     0.0021966533     -0.015507611  0 0 1 1 0
    0.0030792946    -0.0025990087     0.0024293815   -0.00071491147  0 0 0 2 0
  -5.2596642e-13   -1.2961915e-12   -2.6132829e-13   -3.4122791e-13  0 0 0 0 1
  -3.2945348e-13   -1.6895795e-13   -8.8612792e-14   -4.8626901e-14  1 0 0 0 1
   1.2756875e-13    2.3070706e-13    6.3876909e-14    3.8724015e-14  0 1 0 0 1
  -3.1094506e-13   -4.4183895e-14   -8.4760676e-14   -1.0211992e-14  0 0 1 0 1
   5.6640239e-14    -7.816445e-13    4.3366583e-14    -1.995292e-13  0 0 0 1 1
   3.0462698e-13    1.2894872e-13    1.0560976e-13    1.3326254e-14  0 0 0 0 2

--------[ 2021-10-24 00:00:00 ]  #SBS field off: use zero-field calibration for momentum:


# New Momentum calibration SBS-4 SBS 0-percent for pass 2 (also uses below optics):
bb.A_pth1 =     0.270388074
bb.B_pth1 =       1.0307073
bb.C_pth1 = 0.0

--------[ 2021-10-24 11:00:00 ] # SBS field to 50 percent

# New Momentum calibration SBS-4 SBS 50-percent for pass 2 (also uses below optics)
bb.A_pth1 =      0.27430735
bb.B_pth1 =      1.01425878
bb.C_pth1 = 0.0

---------[ 2021-10-25 00:19:00 ] # SBS field back to 30 percent for rest of SBS-4:

# New momentum calibration SBS-4 SBS 30-percent for pass 2:
bb.A_pth1 =     0.272702433
bb.B_pth1 =      1.01298458
bb.C_pth1 = 0.0

----------[ 2021-10-24 23:10:00 ] # zero-field run for SBS-4:
bb.frontconstraintwidth_x = 1.0 
bb.frontconstraintwidth_y = 0.3
bb.backconstraintwidth_x = 0.08
bb.backconstraintwidth_y = 0.08

----------[ 2021-10-25 00:18:00 ] 

bb.frontconstraintwidth_x = 0.1
bb.frontconstraintwidth_y = 0.06
bb.backconstraintwidth_x = 0.055
bb.backconstraintwidth_y = 0.065

----------[ 2021-11-12 00:00:00 ]  # start of SBS-7 kinematics:
# re-using SBS-1 optics initially until I have time to generate new SBS-7 optics(they should be more or less the same since magnet distance is the same)

# GEM origin coordinates for SBS-7 kinematics: see https://logbooks.jlab.org/entry/3943431
bb.gemorigin_xyz = -0.21192 0.04069 3.0170
bb.gemtheta = 8.8355 # degrees
bb.gemphi   = 179.882 # degrees

# slightly better version of SBS-1 optics with more accurate scale factor for simulation field:
# SBS-7 optics optimization from:
# https://sbs.jlab.org/DocDB/0001/000156/001/sbs7_optics_optimization.pdf

bb.preconflag = 1
# NOTE on new momentum reconstruction formalism: 1st-order momentum is calculated from
#   p*thetabend = A_pth1*(1.0 + (B_pth1+C_pth1*bb.magdist)*thtgt)
# and momentum expansion coefficients are for delta = p(first order) * (1+delta)
# In most of the acceptance we don't need any corrections beyond the first-order model

# I believe these are pass 1 values
#bb.A_pth1 =     0.277542448
#bb.B_pth1 =     0.926999692
#bb.C_pth1 = 0.0

#NOTE: angle and vertex reconstruction coefficients are from newfit_sbs7.dat

bb.preconflag = 1
# NOTE on new momentum reconstruction formalism: 1st-order momentum is calculated from
#   p*thetabend = A_pth1*(1.0 + (B_pth1+C_pth1*bb.magdist)*thtgt)
# and momentum expansion coefficients are for delta = p(first order) * (1+delta)
# In most of the acceptance we don't need any corrections beyond the first-order model

# new results with corrected beam energy:

bb.A_pth1 =      0.27777003
bb.B_pth1 =     0.915135981
bb.C_pth1 = 0.0

#NOTE: angle and vertex reconstruction coefficients are from newfit_sbs7.dat

bb.optics_parameters = 
    -0.018501398  -6.7399972e-05   0.00051113736               0    0 0 0 0 0 
      0.43806034   -0.0023926575    0.0045009461               0    1 0 0 0 0 
    -0.020722233    0.0034615225    -0.012662051               0    2 0 0 0 0 
     0.015320724    -0.045600421       1.1058649               0    0 1 0 0 0 
     -0.26764984      0.11312445     -0.22326626               0    1 1 0 0 0 
     0.012835836    -0.044965034     0.049439064               0    0 2 0 0 0 
     -0.32424517    0.0061390671    -0.011105304               0    0 0 1 0 0 
    -0.018702796   -0.0047125082     0.064590279               0    1 0 1 0 0 
      0.16398927     -0.16899269      0.37757206               0    0 1 1 0 0 
     0.067573257  -0.00043834694    -0.087371113               0    0 0 2 0 0 
    -0.039041417       1.0260013      -2.9822304               0    0 0 0 1 0 
       0.7420103     -0.15498262      0.30890089               0    1 0 0 1 0 
    -0.099567929     -0.12153484      0.13542661               0    0 1 0 1 0 
     -0.49758931      0.16939045     -0.78056765               0    0 0 1 1 0 
      0.27744977      0.43693015     -0.69362856               0    0 0 0 2 0 
  -9.6140311e-16   -1.357631e-15   9.2605663e-17               0    0 0 0 0 1 
  -2.1436212e-16   2.1026365e-16   1.9389511e-16               0    1 0 0 0 1 
   2.2572645e-16   1.5761084e-16  -3.5722312e-17               0    0 1 0 0 1 
  -4.6911865e-17   1.5525669e-16   -2.405119e-18               0    0 0 1 0 1 
   3.8674907e-16   1.4831082e-16    8.137218e-17               0    0 0 0 1 1 
   4.5026307e-17  -8.6377048e-17   5.8408047e-17               0    0 0 0 0 2 

bb.forwardoptics_order = 2

bb.forwardoptics_parameters =
      0.17145038   -5.8200144e-05       0.17653638   -0.00062864934  0 0 0 0 0
       3.0596724    -0.0048273883        1.0011929    0.00052868689  1 0 0 0 0
      0.40798918     -0.039255122      0.025073719     -0.017364575  2 0 0 0 0
     0.026738746        3.0708861    0.00073145002        1.1343537  0 1 0 0 0
    -0.017434353      0.096999668    0.00082676004      -0.20801305  1 1 0 0 0
     -0.32618292       0.75618681     -0.052958961       0.29188286  0 2 0 0 0
     0.023416988        1.0295844   -0.00041457803      0.054301523  0 0 1 0 0
        1.356315       -0.1952455      0.003950724       -0.1801919  1 0 1 0 0
      0.09896503       0.73823355     0.0085559259       0.41248243  0 1 1 0 0
    -0.024700958      0.096340445    -0.0032742942      0.055221495  0 0 2 0 0
     -0.20264656    -0.0024860217      -0.28298042     0.0011966209  0 0 0 1 0
     -0.22823691     0.0085005211      -0.26271672     0.0010951043  1 0 0 1 0
    -0.045281297      -0.14684694    -0.0002271937     -0.055438906  0 1 0 1 0
    -0.039804327       -0.0117835     0.0016824887     -0.021948472  0 0 1 1 0
    -0.004499829     0.0035786351     0.0031213657    7.2610149e-05  0 0 0 2 0
   1.0403253e-13   -1.3841803e-13    5.3669329e-15   -2.6719133e-14  0 0 0 0 1
    3.867456e-14    4.0128016e-15    1.7626845e-15     2.550794e-15  1 0 0 0 1
   5.9547433e-15    1.7098248e-14    1.3947702e-15    7.2913951e-15  0 1 0 0 1
   6.7703183e-15    6.4521075e-15    1.1654715e-15    3.4607513e-15  0 0 1 0 1
   5.9044282e-14   -4.0077642e-14    2.1577349e-14   -2.2880732e-14  0 0 0 1 1
   2.7030922e-15   -7.4934769e-15   -8.2866716e-16   -1.7422587e-15  0 0 0 0 2

bb.frontconstraint_x0 = 0.057
bb.frontconstraint_y0 = -0.0163
bb.backconstraint_x0 = 0.0039
bb.backconstraint_y0 = -0.0011

bb.frontconstraintwidth_x = 0.12
bb.frontconstraintwidth_y = 0.06
bb.backconstraintwidth_x = 0.055
bb.backconstraintwidth_y = 0.065

-----------[ 2021-11-13 09:00:00 ] # zero-field run for SBS-7, open up front constraint

bb.frontconstraintwidth_x = 0.75
bb.frontconstraintwidth_y = 0.2

-----------[ 2021-11-13 09:45:00 ] # magnet on, back to normal constraint width:

bb.frontconstraintwidth_x = 0.12
bb.frontconstraintwidth_y = 0.06

bb.ecalo_fudgefactor = 1.0

---------[ 2021-11-23 00:00:00 ] # start of SBS-11 kinematics:

# GEM origin coordinates for SBS-7 kinematics: see https://logbooks.jlab.org/entry/3943431
# For SBS-11 we shift the Z coordinate by 0.3 m upstream initially:
#bb.gemorigin_xyz = -0.21192 0.04069 2.7170

# see SBS-11 straight-track results from: 
# https://logbooks.jlab.org/entry/3964257
# see optimization results from: 
# https://sbs.jlab.org/cgi-bin/DocDB/private/ShowDocument?docid=147
# and also: https://logbooks.jlab.org/entry/3966480
# NOTE: ZSIEVE = 1.19570 m from straight-track analysis:
bb.gemorigin_xyz = -0.204061 0.039233 2.69957
bb.gemtheta = 8.71692 # degrees
bb.gemphi   = 179.078 # degrees

bb.preconflag = 1
# NOTE on new momentum reconstruction formalism: 1st-order momentum is calculated from
#   p*thetabend = A_pth1*(1.0 + (B_pth1+C_pth1*bb.magdist)*thtgt)
# and momentum expansion coefficients are for delta = p(first order) * (1+delta)
# In most of the acceptance we don't need any corrections beyond the first-order model

# pass 1 values
#bb.A_pth1 =     0.271919025
#bb.B_pth1 =     0.721807628
# pass 2 values calibrated with more accurate beam energy: slight increase in field integral:
bb.A_pth1 =      0.273110
bb.B_pth1 =      0.721663
bb.C_pth1 = 0.0

#NOTE: angle and vertex reconstruction coefficients are from newfit_sbs11.dat

bb.optics_parameters = 
    -0.021445814   5.6483129e-05    0.0001748138               0    0 0 0 0 0 
      0.50718497   -0.0033045368    0.0034522215               0    1 0 0 0 0 
    -0.052706028   -0.0017925724  -0.00074193991               0    2 0 0 0 0 
     0.024046755    -0.049402607       1.0995769               0    0 1 0 0 0 
     -0.33813093     0.062742511     -0.13182694               0    1 1 0 0 0 
    -0.017474794     -0.16929464      0.10216957               0    0 2 0 0 0 
     -0.38891569    0.0068978181   -0.0007431868               0    0 0 1 0 0 
      0.13995738    -0.014271192     0.006813449               0    1 0 1 0 0 
      0.28632707    -0.012067602      0.15722113               0    0 1 1 0 0 
     -0.19851938     0.053847488    -0.023291848               0    0 0 2 0 0 
     -0.05272633       1.0320823      -2.7095261               0    0 0 0 1 0 
      0.81545877      -0.1423075       0.2591647               0    1 0 0 1 0 
      0.11162811      0.48540486     -0.21239857               0    0 1 0 1 0 
     -0.69088033      0.11867846      -0.6093847               0    0 0 1 1 0 
    -0.048904399     -0.38581048    -0.057911773               0    0 0 0 2 0 
  -1.3296127e-15   1.6327616e-15  -3.0916307e-16               0    0 0 0 0 1 
   2.9936009e-16   5.4460988e-16   2.1787721e-16               0    1 0 0 0 1 
  -2.4158595e-16  -1.2146423e-16   8.9872129e-17               0    0 1 0 0 1 
  -1.4567222e-17   1.2541327e-16  -6.0125217e-17               0    0 0 1 0 1 
  -1.4130748e-16   1.0382918e-16  -1.6620708e-17               0    0 0 0 1 1 
  -1.2615664e-16  -5.1558342e-17   2.0467856e-16               0    0 0 0 0 2


bb.forwardoptics_order = 2

bb.forwardoptics_parameters =
      0.18485125    -0.0053142984       0.17507225    -0.0021196519  0 0 0 0 0
       2.7916528     -0.014426311        1.0023787    -0.0038153663  1 0 0 0 0
      0.41147948      0.021752272      0.037413367     0.0070345216  2 0 0 0 0
   -0.0056996442        2.7089465    -0.0037449273        1.0782252  0 1 0 0 0
     0.075750745      0.084098749     0.0035502594      -0.11835941  1 1 0 0 0
     -0.33067984       0.66460376     -0.049792477       0.28732059  0 2 0 0 0
    -0.015494962        1.0040717    0.00039510332      0.038873917  0 0 1 0 0
       1.1513885      -0.18546456     0.0012384152       -0.1510933  1 0 1 0 0
    -0.064781842        0.7013124      0.021398208       0.39548701  0 1 1 0 0
    0.0096551536       0.32302803     0.0056671149       0.16919045  0 0 2 0 0
     -0.23572415      0.013072403      -0.27273351     0.0057631724  0 0 0 1 0
     -0.21009212       0.02481021      -0.20144798      0.011786015  1 0 0 1 0
   -0.0055112735   -0.00096679661      0.007919025      0.030609526  0 1 0 1 0
    0.0032394205      0.040111953    5.3881244e-05      0.012411994  0 0 1 1 0
     0.021374185    -0.0076506174   -0.00044235987    -0.0036236133  0 0 0 2 0
  -3.0510831e-13    5.6596308e-13   -8.1712967e-14    2.8194125e-13  0 0 0 0 1
   2.4935356e-14   -1.0579517e-13   -1.2117391e-15   -5.2862811e-14  1 0 0 0 1
   9.1868956e-14   -2.1740381e-13    2.1421993e-14   -9.7329222e-14  0 1 0 0 1
   -3.329797e-14    9.7854803e-14   -5.3467873e-15    4.7323866e-14  0 0 1 0 1
  -5.2949046e-14    6.8924738e-14   -2.5042868e-16    3.5031819e-14  0 0 0 1 1
  -2.3821982e-14    3.3449074e-14   -6.3295719e-15    1.5233745e-14  0 0 0 0 2


# for second round of SBS-11 quality checks:

bb.frontconstraint_x0 = 0.060
bb.frontconstraint_y0 = -0.013
bb.backconstraint_x0 = 0.0031
bb.backconstraint_y0 = 0.0007


#bb.frontconstraintwidth_x = 0.0718517
#bb.frontconstraintwidth_y = 0.069917
bb.frontconstraintwidth_x = 0.1
bb.frontconstraintwidth_y = 0.06
bb.backconstraintwidth_x = 0.055
bb.backconstraintwidth_y = 0.06

bb.ecalo_fudgefactor = 1.0

# for single C foil runs use a wider front constraint cut in X: 
----------[ 2021-11-24 23:45:00 ] 
bb.backconstraintwidth_x = 0.06 
bb.backconstraintwidth_y = 0.06
bb.frontconstraintwidth_x = 0.75 # m
bb.frontconstraintwidth_y = 0.25 # basically set wide open at the front, so that we still enforce calo constraint at the back but not at the front

----------[ 2021-11-25 00:56:00 ] # turn BB magnet on starting run 12279:

bb.backconstraintwidth_x = 0.06 # m 
bb.backconstraintwidth_y = 0.06 # m
bb.frontconstraintwidth_x = 0.1 # m 
bb.frontconstraintwidth_y = 0.06 # m

----------[ 2021-11-25 04:21:00 ] # going to production here, assuming we can get the constraints right

bb.frontconstraint_x0 = 0.060
bb.frontconstraint_y0 = -0.013
bb.backconstraint_x0 = 0.0031
bb.backconstraint_y0 = 0.0007

bb.frontconstraintwidth_x = 0.1
bb.frontconstraintwidth_y = 0.06
bb.backconstraintwidth_x = 0.06
bb.backconstraintwidth_y = 0.06

------[ 2021-11-25 09:29:00 ] # attempt to analyze low-current LH2 runs (12307-12308) with wider constraints:
bb.frontconstraintwidth_x = 0.5 # m 
bb.frontconstraintwidth_y = 0.2 # m

------[ 2021-11-25 10:10:00 ] # LH2 runs at 5-15 uA we need to use the optics and slope constraints as well:
# for second round of SBS-11 quality checks:

bb.frontconstraint_x0 = 0.060
bb.frontconstraint_y0 = -0.013
bb.backconstraint_x0 = 0.0031
bb.backconstraint_y0 = 0.0007

bb.frontconstraintwidth_x = 0.1
bb.frontconstraintwidth_y = 0.06
bb.backconstraintwidth_x = 0.06
bb.backconstraintwidth_y = 0.06

------[ 2021-11-25 11:40:00 ] # back to 1 uA: attempt to analyze low-current LH2 run without constraints:
bb.frontconstraintwidth_x = 0.5 # m 
bb.frontconstraintwidth_y = 0.2 # m

----------[ 2021-11-25 12:15:00 ] # now really going to production; may need to adjust constraints
# for second round of SBS-11 quality checks:

bb.frontconstraint_x0 = 0.060
bb.frontconstraint_y0 = -0.013
bb.backconstraint_x0 = 0.0031
bb.backconstraint_y0 = 0.0007

bb.frontconstraintwidth_x = 0.1
bb.frontconstraintwidth_y = 0.06
bb.backconstraintwidth_x = 0.06
bb.backconstraintwidth_y = 0.06


----------[ 2022-01-06 12:00:00 ] # start of January 2022 running and SBS-14 kinematics:
# for SBS-14 we are back at 1.85 meter distance:

# initial guess for GEM alignments: add 0.3 meters to GEM z coordinate relative to SBS-11:
#bb.gemorigin_xyz = -0.204061 0.039233 3.0
#bb.gemtheta = 8.71692 # degrees
#bb.gemphi   = 179.078 # degrees

# new results for SBS-14 straight-through alignment:
bb.gemorigin_xyz = -0.206968 0.0412156 3.0399
bb.gemtheta = 8.6725 
bb.gemphi = 180.8816

# note: z sieve = 1.50922


# initial guess for optics: re-use SBS-1 optics which is very close to SBS-14 optics in 
# terms of BigBite angle and distance:

# Optimized angle and vertex reconstruction results for SBS-1 by Holly S.-Vance: 
# See https://sbs.jlab.org/cgi-bin/DocDB/private/ShowDocument?docid=136 
# and also https://logbooks.jlab.org/entry/3942893
# Momentum optimization forthcoming: 

bb.preconflag = 1
# NOTE on new momentum reconstruction formalism: 1st-order momentum is calculated from
#   p*thetabend = A_pth1*(1.0 + (B_pth1+C_pth1*bb.magdist)*thtgt)
# and momentum expansion coefficients are for delta = p(first order) * (1+delta)
# In most of the acceptance we don't need any corrections beyond the first-order model

#bb.A_pth1 =     0.268131453
#bb.B_pth1 =     0.970217825
# new A and B coefficents calibrated from PASS-1 data with more accurate beam energy assumption:
bb.A_pth1 = 0.268609
bb.B_pth1 = 0.953111
bb.C_pth1 = 0.0

#NOTE: angle and vertex reconstruction coefficients are from newfit_sbs14.dat

bb.optics_order = 2

bb.optics_parameters = 
    -0.021087198    0.0015626434    -0.001557145               0    0 0 0 0 0 
      0.43473343   -0.0035813804     0.002994747               0    1 0 0 0 0 
    -0.029568163    0.0053920863   -0.0072221746               0    2 0 0 0 0 
     0.013703451    -0.058665806       1.1515291               0    0 1 0 0 0 
     -0.20259309      0.14689308     -0.35454546               0    1 1 0 0 0 
     0.060707016    -0.087799015      0.32606871               0    0 2 0 0 0 
     -0.31265488    0.0090633657   -0.0034176243               0    0 0 1 0 0 
     0.028854239    -0.021566283     0.015904708               0    1 0 1 0 0 
      0.14569602     -0.19583943       0.6030659               0    0 1 1 0 0 
     0.021839681     0.021794253   -0.0019607419               0    0 0 2 0 0 
    -0.033596204       1.0278543      -3.0275756               0    0 0 0 1 0 
      0.54225719     -0.20821397      0.32661704               0    1 0 0 1 0 
     -0.34471479      0.28184896      -1.3030854               0    0 1 0 1 0 
     -0.36880122      0.26892571     -0.59289757               0    0 0 1 1 0 
       0.5419537     -0.12724728      0.95654859               0    0 0 0 2 0 
  -9.6140311e-16   9.2605663e-17   -1.357631e-15               0    0 0 0 0 1 
  -2.1436212e-16   1.9389511e-16   2.1026365e-16               0    1 0 0 0 1 
   2.2572645e-16  -3.5722312e-17   1.5761084e-16               0    0 1 0 0 1 
  -4.6911865e-17   -2.405119e-18   1.5525669e-16               0    0 0 1 0 1 
   3.8674907e-16    8.137218e-17   1.4831082e-16               0    0 0 0 1 1 
   4.5026307e-17   5.8408047e-17  -8.6377048e-17               0    0 0 0 0 2 

bb.forwardoptics_order = 2

bb.forwardoptics_parameters =
      0.17382396    -0.0066557206       0.17569664    -0.0030868695  0 0 0 0 0
       3.0345342     0.0043938447       0.99433041     0.0044717755  1 0 0 0 0
      0.37712799     0.0041542925       0.01299376    -0.0047960569  2 0 0 0 0
    -0.004178193        2.9679678    -0.0022671663        1.1540096  0 1 0 0 0
    -0.091066036     0.0087320072      0.014298363      -0.35493088  1 1 0 0 0
     -0.21909934       0.26605768     -0.041719057      0.012388728  0 2 0 0 0
    0.0064314411        1.0009489   -0.00057751714      0.064015244  0 0 1 0 0
       0.9566635      -0.21936893     0.0087474481      -0.25439729  1 0 1 0 0
     0.067074281       0.14492866      0.028648122       0.19130679  0 1 1 0 0
     -0.11023411      -0.04472276     0.0020498056      0.074958154  0 0 2 0 0
     -0.18987052     0.0075631333      -0.27033195     0.0029871477  0 0 0 1 0
      -0.1815989    -0.0040526165      -0.25446831    -0.0030657435  1 0 0 1 0
    0.0041597445      0.068215303     0.0024994096     -0.030509376  0 1 0 1 0
    -0.013068816      0.024992558     0.0009215102     -0.020334129  0 0 1 1 0
   -0.0035725803    -0.0024735894    0.00053387462   -0.00091250693  0 0 0 2 0
  -3.5548798e-13    1.2983711e-13    4.2175694e-14     4.963647e-14  0 0 0 0 1
   -9.689853e-14    3.0052648e-14   -1.6273549e-14   -6.0345067e-15  1 0 0 0 1
  -1.4022851e-13   -4.5030548e-14   -2.6236156e-14   -5.2277288e-14  0 1 0 0 1
  -7.3157177e-14    7.7249689e-14   -1.1512039e-14    2.4330281e-14  0 0 1 0 1
  -2.5112298e-13   -2.2605161e-14   -7.8957295e-14   -6.4797851e-14  0 0 0 1 1
  -4.1746883e-15   -1.2550901e-14    3.4658026e-16   -5.1417712e-15  0 0 0 0 2


# constraint parameters: 
bb.frontconstraint_x0 = 0.0638
bb.frontconstraint_y0 = -0.0167
bb.backconstraint_x0 = 0.0044
bb.backconstraint_y0 = 0.0021

bb.frontconstraintwidth_x = 0.1
bb.frontconstraintwidth_y = 0.07
bb.backconstraintwidth_x = 0.06
bb.backconstraintwidth_y = 0.07


# time-dependent entries for SBS-14 optics data:
---------[ 2022-01-11 8:45:00 ] # zero-field, five-foil:

#bb.gem.useopticsconstraint = 0
#bb.gem.useslopeconstraint = 0

# for zero-field running we set the front constraints wide open:
bb.frontconstraintwidth_x = 0.75
bb.frontconstraintwidth_y = 0.25

---------[ 2022-01-11 9:13:00 ] # field-on, five-foil optics:

# constraint parameters: 
bb.frontconstraint_x0 = 0.0638
bb.frontconstraint_y0 = -0.0167
bb.backconstraint_x0 = 0.0044
bb.backconstraint_y0 = 0.0021

bb.frontconstraintwidth_x = 0.1
bb.frontconstraintwidth_y = 0.07
bb.backconstraintwidth_x = 0.06
bb.backconstraintwidth_y = 0.07


---------[ 2022-01-11 10:09:00 ] # zero-field, 1-foil optics: 

#bb.gem.useopticsconstraint = 0
#bb.gem.useslopeconstraint = 0

# for zero-field running we set the front constraints wide open:
bb.frontconstraintwidth_x = 0.75
bb.frontconstraintwidth_y = 0.25

---------[ 2022-01-11 10:35:00 ] # presumably going to production after this:

# constraint parameters: 
bb.frontconstraint_x0 = 0.0638
bb.frontconstraint_y0 = -0.0167
bb.backconstraint_x0 = 0.0044
bb.backconstraint_y0 = 0.0021

bb.frontconstraintwidth_x = 0.1
bb.frontconstraintwidth_y = 0.07
bb.backconstraintwidth_x = 0.06
bb.backconstraintwidth_y = 0.07


# zero-field runs on LH2: 
--------[ 2022-01-18 18:53:20 ] ## start zero-field runs on LH2
bb.A_pth1 = 0.266377
bb.B_pth1 = 0.956035

--------[ 2022-01-18 23:22:00 ] ## end zero-field runs on LH2
bb.A_pth1 = 0.268609
bb.B_pth1 = 0.953111


--------[ 2022-01-21 12:00:00 ] ## starting SBS-8 kinematics for GMN: 

# new results for SBS-14 straight-through alignment:
#bb.gemorigin_xyz = -0.206968 0.0412156 3.1899
#bb.gemtheta = 8.6725 
#bb.gemphi = 180.8816

# straight-track results from Holly: 
#bb.gemorigin_xyz = -0.213869 0.0394128 3.12109
#bb.gemtheta = 8.82378 # degrees
#bb.gemphi = 179.406 # degrees
# new straight-track results from Andrew (maybe slight improvement):
bb.gemorigin_xyz = -0.21323 0.03872 3.11940
bb.gemtheta = 8.81847
bb.gemphi = 179.534

# NOTE: ZSIEVE = 1.59074

# starting model for SBS-8 from g4sbs: updated with scale factor 0.9644 for BB field map in simulation and also distance 1.9594 m
bb.optics_order = 2
#bb.optics_parameters = 
#   -0.013951072 -6.7189159e-05  0.00022486239     0.26957803  0 0 0 0 0
#     0.43275107   0.0010961293  -0.0022068665     0.12271782  1 0 0 0 0
#   -0.029264943   0.0089086215   -0.018497904   -0.018303949  2 0 0 0 0
#    0.015286973  -0.0090579402      1.0091097    0.006524678  0 1 0 0 0
#     -0.3771755    0.097156428    -0.23342715    0.018574322  1 1 0 0 0
#   -0.014208137    0.023096216   -0.032298685    0.078452456  0 2 0 0 0
#    -0.34635355 -0.00090695503   0.0018848963   -0.068108122  0 0 1 0 0
#    0.037279672   -0.040196986    0.085799908    0.059415542  1 0 1 0 0
#     0.28933729     -0.2041523     0.62906153   -0.048050144  0 1 1 0 0
#  0.00081558551    0.042209088   -0.099658514   0.0017245797  0 0 2 0 0
#   -0.041171438     0.93418238      -2.868918   -0.014706424  0 0 0 1 0
#      1.0957664    -0.32511236     0.72772292   -0.045808129  1 0 0 1 0
#     0.11481975    -0.44512229      1.0695019    0.036626935  0 1 0 1 0
#    -0.87794966     0.84190651     -2.3706859     0.11360024  0 0 1 1 0
#      -0.103686     0.94946168     -2.4442919    -0.28814815  0 0 0 2 0
# -3.6600546e-15   1.209214e-14 -3.8572524e-14  -1.527841e-14  0 0 0 0 1
#  3.4661576e-15 -1.1778173e-14  2.9222354e-14 -4.0242914e-15  1 0 0 0 1
#  6.4569628e-16  7.5649958e-16 -2.2941854e-15 -3.0794741e-15  0 1 0 0 1
#  6.1103084e-16 -2.2602392e-15  5.9912025e-15 -2.2093524e-16  0 0 1 0 1
#  3.4916311e-16 -5.7801037e-16 -8.8795124e-16 -1.1214327e-14  0 0 0 1 1
# -5.5736366e-16  2.2786736e-16  4.0535244e-17  5.8646239e-15  0 0 0 0 2

# below is the result of Holly's optimization for SBS-8

bb.preconflag = 1
# NOTE on new momentum reconstruction formalism: 1st-order momentum is calculated from
#   p*thetabend = A_pth1*(1.0 + (B_pth1+C_pth1*bb.magdist)*thtgt)
# and momentum expansion coefficients are for delta = p(first order) * (1+delta)
# In most of the acceptance we don't need any corrections beyond the first-order model


# we start with (and default to) the SBS +70% field setting:
# the "A" and "B" parameters below were obtained with SBS +70% field setting: 
bb.A_pth1 =     0.29247624
bb.B_pth1 =      1.0328964
bb.C_pth1 = 0.0


#NOTE: angle and vertex reconstruction coefficients are from newfit_sbs8.dat

bb.optics_parameters = 
    -0.013759973   -1.592921e-05     0.001484359               0    0 0 0 0 0 
      0.44906976   2.6389167e-05   -0.0036176462               0    1 0 0 0 0 
      0.16310164     0.014597315    -0.058818547               0    2 0 0 0 0 
      0.01364764    -0.047671995       1.1175984               0    0 1 0 0 0 
     -0.45218719      0.04751815   -0.0042020046               0    1 1 0 0 0 
    -0.077785229    -0.052027732     0.068093627               0    0 2 0 0 0 
     -0.43199609    0.0015938948      0.01604651               0    0 0 1 0 0 
      -1.2925889    -0.099158508      0.41574763               0    1 0 1 0 0 
      0.46102344     0.028166699     -0.24774137               0    0 1 1 0 0 
       2.2956647      0.17020216     -0.72968708               0    0 0 2 0 0 
    -0.049153808       1.0447057       -3.149672               0    0 0 0 1 0 
       1.1363216     -0.27950141      0.32612254               0    1 0 0 1 0 
      0.48362063     -0.21130766       0.4530525               0    0 1 0 1 0 
     -0.79972375      0.49093974     -0.86213425               0    0 0 1 1 0 
     -0.59939069      0.73703577       -1.665613               0    0 0 0 2 0 
   6.6662462e-13   1.4460761e-13   -8.564676e-14               0    0 0 0 0 1 
  -1.3636705e-12  -3.0468266e-13   1.8938695e-13               0    1 0 0 0 1 
   2.4167385e-14    5.387588e-15  -2.7130557e-15               0    0 1 0 0 1 
  -3.5811408e-13  -8.0462394e-14   5.0353397e-14               0    0 0 1 0 1 
   1.0681994e-14   2.3176467e-15  -1.6232571e-15               0    0 0 0 1 1 
   3.1170311e-16  -2.2752056e-16   2.5453538e-16               0    0 0 0 0 2 


bb.forwardoptics_order = 2

bb.forwardoptics_parameters =
      0.10992349   -0.00065225176       0.17660018    -0.0029299804  0 0 0 0 0
       3.1604498    -0.0054937187        1.0133604    -0.0024564133  1 0 0 0 0
      0.47873141    -0.0078080778      0.067577361    0.00030524167  2 0 0 0 0
     -0.15650093        3.0873922    -0.0011111237        1.0200362  0 1 0 0 0
      0.11153849       0.23671523    -0.0031142588     -0.069364632  1 1 0 0 0
     -0.44486569       0.82592966     -0.035017409        0.3555856  0 2 0 0 0
    -0.071306385        1.0340607    -0.0011611396      0.033891812  0 0 1 0 0
      -1.1240467      0.024877642        1.2436585      -0.14319291  1 0 1 0 0
    -0.082964972       0.74921026      0.016503895       0.51928172  0 1 1 0 0
      0.16450854       0.10161233     0.0097498218      0.062347919  0 0 2 0 0
     0.045260249    -0.0089258138      -0.30039528     0.0097553307  0 0 0 1 0
     -0.17424598    -0.0037122719      -0.33325431     0.0029977097  1 0 0 1 0
      0.35916809      0.017802286     0.0034268012       0.13628857  0 1 0 1 0
      0.16069267     -0.023841065     0.0033749583      0.016646241  0 0 1 1 0
     -0.29924502      0.013066442     0.0074277108    -0.0082854909  0 0 0 2 0
       1.9866799      -0.14669482      -0.62387693      0.011104978  0 0 0 0 1
      0.69083055     -0.067003128      0.017337398     -0.012389974  1 0 0 0 1
       3.6126694      -0.15512263       -1.3007657       0.13124701  0 1 0 0 1
       1.4185121      -0.20543137     -0.010114116     -0.089968398  0 0 1 0 1
     -0.72698326     0.0053967584      0.015185189     -0.046801342  0 0 0 1 1
      0.44272093      -0.12183872     -0.098509806      -0.10410917  0 0 0 0 2


#      0.11285697   -0.00079142157       0.17608595    -0.0028389926  0 0 0 0 0
#       3.1657401    -0.0058953743        1.0132598     -0.002491812  1 0 0 0 0
#       0.4812182    -0.0079918653       0.06735222    0.00028634927  2 0 0 0 0
#     -0.14801031        3.0869961    -0.0020776318        1.0202625  0 1 0 0 0
#      0.12902593       0.23548005    -0.0031716374     -0.069244119  1 1 0 0 0
#     -0.43669455       0.82552648     -0.035253943       0.35564842  0 2 0 0 0
#    -0.069132452        1.0322096    -0.0017749258      0.032261677  0 0 1 0 0
#       2.3169893      -0.26394319     0.0029159585      -0.15484705  1 0 1 0 0
#    -0.096954061       0.73729339       0.01961909         0.506299  0 1 1 0 0
#     0.065329243       0.11499252     0.0066860926      0.066932985  0 0 2 0 0
#     0.029992058     -0.008249277      -0.29765995     0.0092282097  0 0 0 1 0
#     -0.18633195    -0.0030960651      -0.33294692     0.0028250732  1 0 0 1 0
#      0.33919192      0.018629335     0.0059469345       0.13565549  0 1 0 1 0
#      0.18082221     -0.021193557     0.0058586431      0.020709107  0 0 1 1 0
#     -0.27896746      0.012172905     0.0036145562    -0.0075651956  0 0 0 2 0
#  -1.6577947e-15   -1.8940162e-15    5.3894312e-15    -9.863263e-16  0 0 0 0 1
#  -1.5650931e-15   -1.2573203e-15    1.1889966e-15   -4.5234504e-16  1 0 0 0 1
#  -9.1619069e-16   -1.1530115e-15    5.1929289e-16   -4.4695509e-16  0 1 0 0 1
#   1.9569282e-16    1.1841521e-16   -1.6347079e-16    3.0426085e-17  0 0 1 0 1
#   1.4942779e-15   -2.4690167e-16    2.8475773e-15   -8.2995769e-17  0 0 0 1 1
#  -1.7204785e-15    -1.484712e-15    8.8518138e-16   -5.2137558e-16  0 0 0 0 2

# Average TOF to hodoscope based on BigBite magnet distance
bb.etof_avg =      16.5313333

bb.etof_order = 2

bb.etof_parameters = 
    -0.14152803  0 0 0 0 0
     0.47832855  1 0 0 0 0
       0.474596  2 0 0 0 0
      6.2608333  0 1 0 0 0
     -3.6583731  1 1 0 0 0
       3.716205  0 2 0 0 0
    -0.39279241  0 0 1 0 0
     -0.3166402  1 0 1 0 0
      11.779961  0 1 1 0 0
      4.3615227  0 0 2 0 0
     -17.713085  0 0 0 1 0
      10.856032  1 0 0 1 0
     -31.805144  0 1 0 1 0
     -38.053632  0 0 1 1 0
      66.654814  0 0 0 2 0
  1.6462312e-13  0 0 0 0 1
 -1.7313006e-13  1 0 0 0 1
 -1.5319477e-14  0 1 0 0 1
 -4.7447058e-14  0 0 1 0 1
   6.525802e-15  0 0 0 1 1
   3.968649e-15  0 0 0 0 2


# below is the result of the SBS-8 g4sbs optics for bigbite distance 2.00 m
#   -0.013771663  -0.0002256521  0.00018312692     0.27196752  0 0 0 0 0
#      0.4246639  -0.0017872321   0.0013105332     0.12389473  1 0 0 0 0
#   -0.029407222  -0.0034351678   0.0026692106   -0.033647216  2 0 0 0 0
#    0.015499082   -0.026390002      1.0582615    0.012507458  0 1 0 0 0
#    -0.37394344  -0.0011563465    0.016638197    0.024112188  1 1 0 0 0
#   -0.024507171   -0.017279413    0.050821083    0.042019504  0 2 0 0 0
#    -0.33937885   0.0094565558    -0.01029198   -0.071912664  0 0 1 0 0
#     0.03498804    0.037509813   -0.041761505     0.15572015  1 0 1 0 0
#     0.28268961     0.08164754    -0.14186185    -0.12489609  0 1 1 0 0
#    0.011371105   -0.084834877     0.10335449    -0.14492448  0 0 2 0 0
#   -0.041417374     0.95606808     -2.9719402   -0.032529073  0 0 0 1 0
#      1.1091747     -0.2252927     0.45584208   -0.071101601  1 0 0 1 0
#      0.1327009   -0.089250991     0.25377818     0.24645197  0 1 0 1 0
#    -0.88172666     0.51516512     -1.4597906      0.3374035  0 0 1 1 0
#    -0.10122694     0.32909604    -0.94581536    -0.59557723  0 0 0 2 0
#  6.6662462e-13  -8.564676e-14  1.4460761e-13  1.7773754e-13  0 0 0 0 1
# -1.3636705e-12  1.8938695e-13 -3.0468266e-13 -4.0371613e-14  1 0 0 0 1
#  2.4167385e-14 -2.7130557e-15   5.387588e-15  5.4713928e-15  0 1 0 0 1
# -3.5811408e-13  5.0353397e-14 -8.0462394e-14 -7.2779683e-15  0 0 1 0 1
#  1.0681994e-14 -1.6232571e-15  2.3176467e-15  7.6845026e-15  0 0 0 1 1
#  3.1170311e-16  2.5453538e-16 -2.2752056e-16 -2.8311793e-15  0 0 0 0 2

# we will start with at least the X front constraint width wide open, until we take the zero-field data and 
# turn on the magnets with beam:

bb.frontconstraintwidth_x = 1.0  # m
bb.frontconstraintwidth_y = 0.25 # also relax y front constraint width initially

# When the zero-field is done, we will want to use these values initially:

#bb.frontconstraintwidth_x = 0.2 # m
#bb.frontconstraintwidth_y = 0.1 # m


----------[ 2022-01-22 6:00:00 ] # sieve out, tighten up tracking constraints:

bb.frontconstraint_x0 = 0.0440
bb.frontconstraint_y0 = -0.0133
bb.backconstraint_x0 = 0.0021
bb.backconstraint_y0 = 0.0015

#bb.frontconstraintwidth_x = 0.0451774
#bb.frontconstraintwidth_y = 0.0486681
bb.frontconstraintwidth_x = 0.07
bb.frontconstraintwidth_y = 0.06
bb.backconstraintwidth_x = 0.0499104
bb.backconstraintwidth_y = 0.0624532

# time-dependent "A" and "B" parameters for momentum reconstruction for the various SBS-8 field settings:

# OLD: the "A" and "B" parameters below were obtained with SBS +70% field setting: 
#bb.A_pth1 =     0.292223032
#bb.B_pth1 =      1.04733553
#bb.C_pth1 = 0.0

# below are momentum parameters obtained with updated beam energy per Provakar:

# the "A" and "B" parameters below were obtained with SBS +50% field setting: 
#bb.A_pth1 =     0.29151395
#bb.B_pth1 =      1.0369001
#bb.C_pth1 = 0.0

# the "A" and "B" parameters below were obtained with SBS +0% field setting: 
#bb.A_pth1 =     0.28950467
#bb.B_pth1 =      1.0392683
#bb.C_pth1 = 0.0

# the "A" and "B" parameters below were obtained with SBS +70% field setting: 
#bb.A_pth1 =     0.29247624
#bb.B_pth1 =      1.0328964
#bb.C_pth1 = 0.0

# the "A" and "B" parameters below were obtained with SBS +100% field setting: 
#bb.A_pth1 =     0.29405736
#bb.B_pth1 =      1.0339951
#bb.C_pth1 = 0.0


-----------[ 2022-01-22 16:50:00 ] # Start SBS 0-field runs (first run 13459): adjust momentum

# the "A" and "B" parameters below were obtained with SBS +0% field setting: 
bb.A_pth1 =     0.28950467
bb.B_pth1 =      1.0392683
bb.C_pth1 = 0.0

-----------[ 2022-01-23 15:21:00 ] # back to +70% current (starting with run 13482): adjust momentum

# the "A" and "B" parameters below were obtained with SBS +70% field setting: 
bb.A_pth1 =     0.29247624
bb.B_pth1 =      1.0328964
bb.C_pth1 = 0.0

-----------[ 2022-01-27 06:00:00 ] # SBS to +100% current (first run 13521): adjust momentum

# the "A" and "B" parameters below were obtained with SBS +100% field setting: 
bb.A_pth1 =     0.29405736
bb.B_pth1 =      1.0339951
bb.C_pth1 = 0.0

-----------[ 2022-01-28 17:47:00 ] # back to +70% current (starting with run 13558): adjust momentum

# the "A" and "B" parameters below were obtained with SBS +70% field setting: 
bb.A_pth1 =     0.29247624
bb.B_pth1 =      1.0328964
bb.C_pth1 = 0.0

-----------[ 2022-01-29 18:40:00 ] # SBS to +50% current (starting with run 13579): adjust momentum

# the "A" and "B" parameters below were obtained with SBS +50% field setting: 
bb.A_pth1 =     0.29151395
bb.B_pth1 =      1.0369001
bb.C_pth1 = 0.0

-----------[ 2022-01-30 04:00:00 ] # back to +70% current (starting with run 13587): adjust momentum

# the "A" and "B" parameters below were obtained with SBS +70% field setting: 
bb.A_pth1 =     0.29247624
bb.B_pth1 =      1.0328964
bb.C_pth1 = 0.0


-----------[ 2022-02-01 12:00:00 ] # starting SBS-9: gonna need some optics and some offsets:

# Let's re-use SBS-11 to start: 

# setting zgem to 2.7 initially (guess based on SBS-11)
#bb.gemorigin_xyz = -0.21323 0.03872 2.7
#bb.gemtheta = 8.81847
#bb.gemphi = 179.534

# new straight-track alignment:
bb.gemorigin_xyz = -0.20603 0.04289 2.70386
# note: ZSIEVE = 1.18572
bb.gemtheta = 8.7696
bb.gemphi = 178.704

bb.optics_order = 2
#bb.optics_parameters = 
#    -0.0214458141  5.64831289e-05  0.000174813803      0.27029389  0 0 0 0 0
#       0.50718497  -0.00330453678   0.00345222149      0.12205141  1 0 0 0 0
#    -0.0527060279   -0.0017925724 -0.000741939914     -0.01022957  2 0 0 0 0
#     0.0240467551   -0.0494026074      1.09957687    0.0028131941  0 1 0 0 0
#     -0.338130927    0.0627425108    -0.131826944     0.019582153  1 1 0 0 0
#    -0.0174747942    -0.169294644     0.102169572     0.035205625  0 2 0 0 0
#     -0.388915692   0.00689781813 -0.000743186795    -0.067857803  0 0 1 0 0
#      0.139957379   -0.0142711919   0.00681344901     0.049707273  1 0 1 0 0
#      0.286327073   -0.0120676021     0.157221134    -0.031227027  0 1 1 0 0
#     -0.198519376     0.053847488   -0.0232918483    0.0028059771  0 0 2 0 0
#    -0.0527263298      1.03208226     -2.70952607   -0.0037280235  0 0 0 1 0
#      0.815458771    -0.142307502     0.259164705    -0.041152624  1 0 0 1 0
#      0.111628111     0.485404858    -0.212398573      0.11845865  0 1 0 1 0
#     -0.690880332     0.118678459    -0.609384699     0.067290195  0 0 1 1 0
#    -0.0489043987    -0.385810483   -0.0579117727     -0.23627613  0 0 0 2 0
#   -1.3296127e-15   1.6327616e-15  -3.0916307e-16   -1.476311e-14  0 0 0 0 1
#    2.9936009e-16   5.4460988e-16   2.1787721e-16   -1.619684e-14  1 0 0 0 1
#   -2.4158595e-16  -1.2146423e-16   8.9872129e-17  -6.9074173e-16  0 1 0 0 1
#   -1.4567222e-17   1.2541327e-16  -6.0125217e-17  -5.6195273e-15  0 0 1 0 1
#   -1.4130748e-16   1.0382918e-16  -1.6620708e-17  -7.4097742e-15  0 0 0 1 1
#   -1.2615664e-16  -5.1558342e-17   2.0467856e-16  -2.0608788e-15  0 0 0 0 2

bb.preconflag = 1
# NOTE on new momentum reconstruction formalism: 1st-order momentum is calculated from
#   p*thetabend = A_pth1*(1.0 + (B_pth1+C_pth1*bb.magdist)*thtgt)
# and momentum expansion coefficients are for delta = p(first order) * (1+delta)
# In most of the acceptance we don't need any corrections beyond the first-order model

#bb.A_pth1 =     0.269878955
#bb.B_pth1 =     0.893519136
#bb.C_pth1 = 0.0

# updated momentum parameters (only significant change is recalibration using updated beam energy):
bb.A_pth1 =     0.27027769
bb.B_pth1 =     0.88540651
bb.C_pth1 = 0.0

#NOTE: angle and vertex reconstruction coefficients are from newfit_sbs9.dat

bb.optics_order = 2

bb.optics_parameters = 
    -0.020517883  -0.00042989563      0.00010271               0    0 0 0 0 0 
      0.51141348   -0.0013363913    0.0040284468               0    1 0 0 0 0 
     -0.03950825     0.010568943   -0.0013542112               0    2 0 0 0 0 
     0.012457819    -0.064768269       1.1245907               0    0 1 0 0 0 
     -0.25850727      0.10585941     -0.25062785               0    1 1 0 0 0 
    -0.023728789     -0.11053071      0.21187121               0    0 2 0 0 0 
     -0.39356779   -0.0024541914   -0.0037547647               0    0 0 1 0 0 
     0.034051545     -0.01595371    0.0071457255               0    1 0 1 0 0 
      0.19999534     -0.12106357      0.41760035               0    0 1 1 0 0 
   -0.0010542356   -0.0040907474    -0.010128135               0    0 0 2 0 0 
     -0.02582583       1.0553173      -2.7427942               0    0 0 0 1 0 
      0.62369246     -0.15894176       0.2763896               0    1 0 0 1 0 
      0.21370884       0.3283995     -0.88585797               0    0 1 0 1 0 
     -0.47926776      0.18568832     -0.66136553               0    0 0 1 1 0 
     -0.24059532   -0.0050616617      0.61274832               0    0 0 0 2 0 
  -1.3296127e-15  -3.0916307e-16   1.6327616e-15               0    0 0 0 0 1 
   2.9936009e-16   2.1787721e-16   5.4460988e-16               0    1 0 0 0 1 
  -2.4158595e-16   8.9872129e-17  -1.2146423e-16               0    0 1 0 0 1 
  -1.4567222e-17  -6.0125217e-17   1.2541327e-16               0    0 0 1 0 1 
  -1.4130748e-16  -1.6620708e-17   1.0382918e-16               0    0 0 0 1 1 
  -1.2615664e-16   2.0467856e-16  -5.1558342e-17               0    0 0 0 0 2 

bb.forwardoptics_order = 2

bb.forwardoptics_parameters =
      0.17656669     0.0039031934       0.17583856      0.001591337  0 0 0 0 0
       2.7535576     0.0091522363       0.98505543     0.0067611145  1 0 0 0 0
      0.36013182     -0.093233833     -0.017399672     -0.037014031  2 0 0 0 0
    0.0023288652        2.7156124    -0.0022865335        1.1137646  0 1 0 0 0
     0.053679004       0.15577025    -0.0012930515      -0.17627642  1 1 0 0 0
     -0.40086289     -0.078818812      -0.09358588      -0.16072698  0 2 0 0 0
   -0.0058642458        1.0233943    -0.0055575025      0.064923032  0 0 1 0 0
       -1.905557       -1.4652188       -4.9416749      -0.37278238  1 0 1 0 0
     -0.20723363       0.41315702      0.011416685       0.21167967  0 1 1 0 0
     0.033440782      0.090909374       0.01932775       0.10393494  0 0 2 0 0
     -0.21074237    -0.0063795407      -0.27178278    -0.0023547876  0 0 0 1 0
     -0.20811157     -0.011233059      -0.22473548     -0.004756931  1 0 0 1 0
   -0.0073940945      0.007502537     0.0029078183    -0.0072045712  0 1 0 1 0
    0.0039110723       0.03269868     0.0065771085    -0.0077657279  0 0 1 1 0
   0.00019342629     0.0027302778   -0.00026301749    0.00098502603  0 0 0 2 0
       3.1773609        1.5018517        5.6081376       0.23782844  0 0 0 0 1
      0.69852542      -0.17570136      0.057647567     -0.090038192  1 0 0 0 1
        2.488377        1.5427308        4.8366214       0.24200282  0 1 0 0 1
      0.35280027     -0.056806799     -0.092413091     -0.091104246  0 0 1 0 1
     0.086045245      0.037550192       0.10092372    -0.0077999523  0 0 0 1 1
      0.32961746       -1.0369067       -2.7273275      -0.39636933  0 0 0 0 2


# NEW: Downbending optics: Uncomment to reconstruct downbending tracks instead of upbending:
bb.preconflag = 1

#bb.A_pth1 =          0.2885
#bb.B_pth1 =           0.994
#bb.C_pth1 = 0.0

bb.downbending_mode = 0
bb.downbendoptics_order = 2

bb.downbendoptics_parameters = 
   -0.015811481  0.00072325318  -0.0022040066   -0.063754654  0 0 0 0 0
     0.52920143   0.0035745757  -0.0091474739      -0.114069  1 0 0 0 0
   -0.052110464   0.0060215583   -0.012944833    0.039111423  2 0 0 0 0
    0.038072879    -0.19857043      1.4110746   -0.086006192  0 1 0 0 0
    -0.13170564    -0.65351027      1.2658134     0.12815871  1 1 0 0 0
   -0.044158074   -0.062745627     0.15088839     0.63376373  0 2 0 0 0
    -0.43375095  -0.0075730927    0.019741901     0.28382107  0 0 1 0 0
    0.056047801    -0.02243488    0.049648102     0.03844471  1 0 1 0 0
   0.0028542448        1.45273     -3.0084107     0.18757669  0 1 1 0 0
    0.040454178    0.021037384   -0.047744537    -0.03086994  0 0 2 0 0
   -0.047713126      1.2060368     -3.0776149     0.18141135  0 0 0 1 0
     0.55674033     0.58707985     -1.2706606    -0.54997503  1 0 0 1 0
    0.064065436     0.20882001    -0.52791122    -0.69853561  0 1 0 1 0
    -0.35581039     -1.4171367      2.9501818    -0.11748174  0 0 1 1 0
   -0.086361793     -0.1481459     0.45964753    -0.60129204  0 0 0 2 0
 -7.6449606e-15 -9.2017798e-16  2.5560824e-16  4.4395571e-16  0 0 0 0 1
  2.9178465e-15  5.1097338e-16 -2.4091578e-16 -5.3720724e-17  1 0 0 0 1
  3.3182883e-16  2.9050367e-16  6.1783589e-16 -1.3547405e-16  0 1 0 0 1
 -7.5210534e-18 -3.4206335e-16 -3.4637339e-16  2.6009374e-17  0 0 1 0 1
  -3.662556e-16  5.9932607e-16 -6.5170893e-16  1.0592023e-16  0 0 0 1 1
 -1.3352603e-17  1.6760317e-16 -3.8307558e-16 -1.0338358e-17  0 0 0 0 2

bb.etof_order = 2

# electron TOF 
# Average TOF to hodoscope based on BigBite magnet distance
bb.etof_avg =      15.1666667

bb.etof_parameters = 
    -0.13676866  0 0 0 0 0
     0.49708292  1 0 0 0 0
     0.50543847  2 0 0 0 0
      2.8420205  0 1 0 0 0
     -2.8961366  1 1 0 0 0
      1.6230121  0 2 0 0 0
    -0.41663386  0 0 1 0 0
    0.029448068  1 0 1 0 0
      7.9201497  0 1 1 0 0
      3.2818619  0 0 2 0 0
     -7.0572936  0 0 0 1 0
      6.6643704  1 0 0 1 0
     -9.8332031  0 1 0 1 0
     -18.975032  0 0 1 1 0
       19.94515  0 0 0 2 0
 -5.3306198e-15  0 0 0 0 1
 -1.0273912e-15  1 0 0 0 1
 -4.2591164e-15  0 1 0 0 1
 -1.7580584e-15  0 0 1 0 1
 -6.5926827e-16  0 0 0 1 1
 -4.1230571e-15  0 0 0 0 2


# we have to start with more open cuts until we know what we have:
bb.frontconstraint_x0 = 0.0582
bb.frontconstraint_y0 = -0.0127
bb.backconstraint_x0 = 0.0056
bb.backconstraint_y0 = 0.0010

bb.frontconstraintwidth_x = 0.1
bb.frontconstraintwidth_y = 0.072
bb.backconstraintwidth_x = 0.054
bb.backconstraintwidth_y = 0.072

-------[ 2022-02-02 17:25:00 ] # start zero-field running for optics

# open up front constraint points for field-off running.
bb.frontconstraintwidth_x = 0.75 # m
bb.frontconstraintwidth_y = 0.25 # m

------[ 2022-02-02 18:30:00 ] # turn field back on for optics running and production:

bb.frontconstraintwidth_x = 0.1
bb.frontconstraintwidth_y = 0.072
bb.backconstraintwidth_x = 0.054
bb.backconstraintwidth_y = 0.072


------[ 2022-09-01 00:00:00 ] # BPM settings, used for track vertex

bb.BPM_separation = 5.15 # This is the distance between BPMA and BPMB
bb.BPMA_dist_to_targ = 7.53 # This is the distance from BPMA and the nominal 0 position vertex z position in the hall

# test wider constraints:
#bb.frontconstraintwidth_x = 0.5
#bb.frontconstraintwidth_y = 0.1

------[ 2022-09-01 00:00:00 ] # starting optics for GEN-1 kinematics from simulation with 0.97 scale factor for BB field map

# Add 8 cm to Z coordinate to account for 1.63 m magnet distance at the start of GEN:
#bb.gemorigin_xyz = -0.20603 0.04289 2.78386
# note: ZSIEVE = 1.18572
#bb.gemtheta = 8.7696
#bb.gemphi = 178.704

bb.gemorigin_xyz = -0.2072627 0.0501525 2.77158
bb.gemtheta = 8.80161
bb.gemphi = 177.4108
# NOTE: ZSIEVE fit result is 1.24879 and 
# implied magnet distance is 1.61794 m wrt C foil target

# starting optics model from simulation for GEN-1 kinematics:
bb.optics_order = 2

bb.preconflag = 1

bb.A_pth1 = 0.263077985
bb.B_pth1 = 0.999237626
bb.C_pth1 = 0.0
bb.A_pvy = -0.0147632089
bb.B_pvy = -15.893095
bb.use_beampos = 1

bb.optics_parameters = 
   -0.016265428  0.00017064242 -0.00045654972   0  0 0 0 0 0
     0.50638131   0.0011159527  -0.0021959477   0  1 0 0 0 0
   -0.040074342   0.0015028673   0.0038822145   0  2 0 0 0 0
    0.020148823     -0.0382106       1.081493   0  0 1 0 0 0
    -0.48730592    0.029478422   7.948794e-05   0  1 1 0 0 0
   -0.019473252   -0.023671281    0.019177544   0  0 2 0 0 0
    -0.40471071  -0.0016412065   0.0031667667   0  0 0 1 0 0
    0.054159517  -0.0019101418   -0.030165725   0  1 0 1 0 0
     0.36316782    0.053816353    -0.12957348   0  0 1 1 0 0
   -0.013502879  -0.0059648215    0.057719207   0  0 0 2 0 0
   -0.050262431      1.0178465     -2.7754957   0  0 0 0 1 0
      1.2612367    -0.10806322    0.017402213   0  1 0 0 1 0
      0.1280882    0.052453908   -0.039085928   0  0 1 0 1 0
    -0.96013346    0.025074186    0.016388436   0  0 0 1 1 0
   -0.078322525   -0.017668931   -0.011463615   0  0 0 0 2 0
  4.2062233e-16  4.5546672e-16 -5.3969459e-16   0  0 0 0 0 1
 -6.6066522e-17  4.8138255e-16 -1.1801343e-15   0  1 0 0 0 1
 -4.7943149e-16 -8.6860893e-17  6.8098953e-17   0  0 1 0 0 1
 -3.9118341e-16  1.8487649e-16 -3.6740405e-16   0  0 0 1 0 1
  7.0811769e-17  -1.398569e-16  8.1629702e-17   0  0 0 0 1 1
 -1.5556255e-16  5.2384011e-17 -7.2058638e-17   0  0 0 0 0 2


# NOTE: the following forward optics model was calculated from the same simulation that produced the backward optics model above:
#bb.forwardoptics_order = 2

#bb.forwardoptics_parameters =
#    0.17280521 -0.00018353738     0.17564411    0.000160672  0 0 0 0 0
#      2.7928331 -0.00044077657     0.99429165 -0.00027917316  1 0 0 0 0
#     0.36624826  -0.0073050809    0.027021692  -0.0035665693  2 0 0 0 0
#  -0.0050445843      2.7824483  -0.0020940949      1.0609376  0 1 0 0 0
#    0.039105804    0.077828333   0.0093644663   -0.060653246  1 1 0 0 0
#    -0.49034172      0.1406243    -0.28621514    0.056050936  0 2 0 0 0
#  -0.0014566121      1.0081105  -0.0027586664    0.021830069  0 0 1 0 0
#      1.7191045    -0.21528608   -0.088120449    -0.12825831  1 0 1 0 0
#    -0.22202974     0.15177559    -0.22916316    0.069175806  0 1 1 0 0
#   -0.043225578    0.047875085   -0.070526819    0.022742982  0 0 2 0 0
#    -0.21276985  0.00040873149    -0.26598225  -0.0010213168  0 0 0 1 0
#    -0.19591058  -0.0035878183    -0.23819825  -0.0029898962  1 0 0 1 0
#    0.014487101  -0.0036253542   0.0017822485    0.037355551  0 1 0 1 0
#   0.0075813567   0.0099238728   0.0053641923    0.024832663  0 0 1 1 0
#   0.0050697409 -0.00055698919   0.0065253109  0.00063783111  0 0 0 2 0
#  7.4902358e-15 -1.0991558e-15 -1.4079424e-15 -1.2514604e-16  0 0 0 0 1
# -4.6782193e-16  8.7090221e-16 -2.7372449e-16  6.0451552e-17  1 0 0 0 1
#  4.6472349e-16  1.0926916e-15  1.3665357e-16  2.0666814e-16  0 1 0 0 1
#  3.4407253e-17 -1.7826548e-15  2.3824983e-16 -1.6609293e-16  0 0 1 0 1
#  3.0698282e-15 -2.1698913e-15 -7.9398525e-16 -1.2059819e-15  0 0 0 1 1
#  6.6872812e-16  -8.631965e-16  3.6137848e-16  8.7368572e-17  0 0 0 0 2

# NOTE: the following forward optics model was generated from the GEN2 data:
bb.forwardoptics_order = 2

bb.forwardoptics_parameters =
      0.17434023   -0.00030722402       0.17794859    0.00014690511  0 0 0 0 0
       2.7929751    0.00088940579        1.0005655    0.00010417947  1 0 0 0 0
      0.36292981    -0.0074490907      0.027791243    -0.0027032011  2 0 0 0 0
     0.014205495        2.7779003     0.0037395891        1.0620433  0 1 0 0 0
   -0.0038117442      0.085892337    -0.0039266804     -0.052909881  1 1 0 0 0
     -0.31803246        0.1108819     -0.040635787      0.049865347  0 2 0 0 0
   0.00070004065        1.0065958    -0.0033463446      0.023691943  0 0 1 0 0
     -0.25878477      -0.21825212        -2.603987      -0.12563249  1 0 1 0 0
    -0.041809404       0.13957413       0.02298313      0.076420092  0 1 1 0 0
     0.035059487      0.044622659     0.0047606147      0.024095079  0 0 2 0 0
     -0.21963689     0.0011760962      -0.27562621   -0.00086089768  0 0 0 1 0
     -0.22208612    -0.0040265955      -0.26786871    -0.0029777829  1 0 0 1 0
    -0.022695956      0.021752161    -0.0087189433      0.039578565  0 1 0 1 0
    -0.011995924      0.021467208     0.0047292351      0.020831668  0 0 1 1 0
    0.0049049579    -0.0012007085     0.0070469817    0.00048238424  0 0 0 2 0
       1.1861179     -0.000949605        1.4645785   -0.00082867168  0 0 0 0 1
      0.57012683     -0.041369724      0.039199192     -0.014487831  1 0 0 0 1
       2.0638446      0.077914718        2.5973345      0.031059822  0 1 0 0 1
      0.93765825     -0.084131991    -0.0010421469     -0.037210213  0 0 1 0 1
  -0.00070311116     0.0027457089      0.021606009     0.0018183004  0 0 0 1 1
      0.37506599     -0.043377315    -0.0083906334     -0.019320823  0 0 0 0 2


# rough guesses at starting constraint values for GEN:
# start with offsets from end of GMN 
bb.frontconstraint_x0 = 0.0436
bb.frontconstraint_y0 = -0.0136
bb.backconstraint_x0 = 0.0032
bb.backconstraint_y0 = 0.0010

# start with relatively wide tolerances (will need to disable constraints for zero-field/optics/cosmic runs, etc
bb.frontconstraintwidth_x = 0.2
bb.frontconstraintwidth_y = 0.15
bb.backconstraintwidth_x = 0.05
bb.backconstraintwidth_y = 0.06

# constraint centering from run 1681:

bb.frontconstraint_x0 = 0.022
bb.frontconstraint_y0 = -0.0136
bb.backconstraint_x0 = 0.0056
bb.backconstraint_y0 = 0.0010

--------[ 2022-10-10 01:43:00 ] # zero-field runs for optics:

bb.frontconstraintwidth_x = 0.75
bb.frontconstraintwidth_y = 0.25

--------[ 2022-10-10 03:30:00 ] # magnets on for multi-foil optics: front constraint back to 0.2:

bb.frontconstraintwidth_x = 0.12
bb.frontconstraintwidth_y = 0.15

--------[ 2022-10-10 05:44:00 ] # more zero-field, open up constraint again:

bb.frontconstraintwidth_x = 0.75
bb.frontconstraintwidth_y = 0.25

--------[ 2022-10-10 07:17:00 ] # magnets back on, use tighter constraints again:

bb.frontconstraintwidth_x = 0.12
bb.frontconstraintwidth_y = 0.15

#NOTE: THERE IS A CONSIDERABLE GAP HERE WITH DIFFERENT SBS+BB FIELD SETTINGS AND BBCAL HV'S THAT MAY REQUIRE ADDITIONAL ENTRIES (AJRP)

--------[ 2022-10-14 20:00:00 ] # start of GEN-2 kinematics. Most runs at this setting use BB 700 A, SBS 2100 A:

bb.backconstraint_x0 = 0.0032
bb.backconstraint_y0 = 0.0002

bb.frontconstraint_x0 = 0.0443
bb.frontconstraint_y0 = -0.0136
bb.backconstraintwidth_x = 0.05
bb.backconstraintwidth_y = 0.06
bb.frontconstraintwidth_x = 0.15
bb.frontconstraintwidth_y = 0.11
# no change in back constraint offsets or widths needed


--------[ 2022-11-07 00:00:00 ]  #start of GEN-3 kinematics, go back to BB 750A current

bb.gemorigin_xyz = -0.208188 0.046735 2.77478
bb.gemtheta = 8.85769 
bb.gemphi = 178.2506

bb.preconflag = 1

bb.A_pth1 = 0.27765103
bb.B_pth1 = 0.932092801
bb.C_pth1 = 0.0
bb.A_pvy = 0.0175826672
bb.B_pvy = -33.8073321

bb.use_beampos = 1

bb.optics_order = 2


bb.optics_parameters =
    -0.0193518309 -0.000312970249  0.000407633414  0  0 0 0 0 0
      0.493972375   0.00114235092   0.00190533572  0  1 0 0 0 0
    -0.0324664617  -0.00726641403    0.0760449739  0  2 0 0 0 0
   -0.00704938738    -0.053050936       1.1117798  0  0 1 0 0 0
      0.259188707    0.0109126249    0.0426275842  0  1 1 0 0 0
    -0.0191631168   -0.0663959044    0.0586730159  0  0 2 0 0 0
      -0.37747196  -0.00527105278   0.00233178149  0  0 0 1 0 0
   -0.00955114709    0.0235320238    -0.418755914  0  1 0 1 0 0
     -0.193010924     0.139979792    -0.431746575  0  0 1 1 0 0
     0.0795927581    0.0168357653     0.552621328  0  0 0 2 0 0
     0.0102371965      1.05342487     -2.80715917  0  0 0 0 1 0
     -0.690906057   -0.0296452295    -0.147912261  0  1 0 0 1 0
      0.182145966     0.226760642   -0.0301996807  0  0 1 0 1 0
      0.596304115    -0.129672028     0.598187029  0  0 0 1 1 0
     -0.290810681    -0.127950838    -0.306043755  0  0 0 0 2 0
      -0.84988972               0               0  0  0 0 0 0 1
   -4.8338108e-16  -2.4738261e-17   3.1967331e-16  0  1 0 0 0 1
    1.9893742e-16  -2.0513864e-16   2.2193036e-16  0  0 1 0 0 1
    8.1869141e-17  -5.2027724e-17   1.3046838e-16  0  0 0 1 0 1
    6.1838459e-16   1.4263362e-16  -1.9736089e-16  0  0 0 0 1 1
    1.7656504e-16  -5.6889022e-17   6.5956198e-17  0  0 0 0 0 2

bb.forwardoptics_order = 2

bb.forwardoptics_parameters =
      0.17364694    -0.0078561142       0.17947209   -0.00063375706  0 0 0 0 0
       2.8105791    -0.0082927959       0.98725309      -0.01027053  1 0 0 0 0
      0.45655332      -0.03078473      0.059084447     -0.013391672  2 0 0 0 0
    -0.017378816        2.7361205     0.0051809836        1.0473396  0 1 0 0 0
    -0.010044625      0.039468731     0.0072160587      -0.18944467  1 1 0 0 0
    -0.081249663     -0.057033931      0.024850635     -0.023385198  0 2 0 0 0
    -0.016253556        1.0282296    -0.0067210036      0.028000223  0 0 1 0 0
      -3.8338123      -0.19359928       -3.8948129      -0.16218428  1 0 1 0 0
     -0.14367591      0.022852081      0.038432343        0.1015103  0 1 1 0 0
     0.026478171       0.10270109    -0.0080627799      0.060566403  0 0 2 0 0
     -0.21351804      0.030745909      -0.29227585     0.0041050086  0 0 0 1 0
     -0.20306802     0.0050721805      -0.23793698      0.019504684  1 0 0 1 0
     0.055466864      0.016398123    -0.0023443835      0.062582547  0 1 0 1 0
     0.021686192    -0.0015701593      0.020238301      0.036686856  0 0 1 1 0
    0.0020034748     -0.028552887      0.013575308    -0.0041913471  0 0 0 2 0
       3.8849443      0.046585735        2.9132144     0.0079517129  0 0 0 0 1
    -0.023560388      -0.01725523      -0.30464324     0.0031360077  1 0 0 0 1
       3.2750912       0.20858933        4.1547138      0.025248131  0 1 0 0 1
       1.6449286     -0.022163571     -0.029792371     -0.029398724  0 0 1 0 1
    0.0053157475     -0.017043628    -0.0072124652     0.0083034275  0 0 0 1 1
       1.3313434      -0.16751839        1.2247774      0.041637358  0 0 0 0 2


--------[ 2022-11-26 15:00:00 ] # start zero-field running for optics

bb.frontconstraint_x0 = -0.0656
bb.frontconstraintwidth_x = 0.1
bb.frontconstraintwidth_y = 0.2	

-------[ 2022-11-26 19:07:00 ] # back to full-field running:

bb.frontconstraint_x0 = 0.055
bb.frontconstraint_y0 = -0.004
bb.backconstraint_x0 = 0.00114813
bb.backconstraint_y0 = 0.00225662

bb.frontconstraintwidth_x = 0.08
bb.frontconstraintwidth_y = 0.15
bb.backconstraintwidth_x = 0.06
bb.backconstraintwidth_y = 0.09	


--------[ 2023-01-01 00:00:00 ] # start GEN-4:

# until we get zero-field data, we start with the GEM alignment results from previous kinematics (same BB distance):
bb.gemorigin_xyz = -0.208188 0.046735 2.77478
bb.gemtheta = 8.85769 
bb.gemphi = 178.2506

# to start, we keep the same tracking constraint parameters from Kin. 3 (might need to adjust ytarget and yptarget limits)

# new g4sbs optics (forward and backward), at 35-degree central angle and 97% field scale relative to map_696A.dat:
bb.optics_order = 2

bb.preconflag = 1

bb.use_beampos = 0

bb.A_pth1 =       0.2775655
bb.B_pth1 =        0.974132
bb.C_pth1 = 0.0
bb.A_pvy = 0
bb.B_pvy = 0

bb.optics_parameters = 
    -0.0190133122  -0.00237508732   0.00119967349  0  0 0 0 0 0
      0.491959455   -0.0033862903   0.00200378752  0  1 0 0 0 0
    -0.0102793565    0.0378200907    -0.041665516  0  2 0 0 0 0
    -0.0059815721   -0.0627564376      1.12792469  0  0 1 0 0 0
      0.162485379    -0.180602869     0.208986365  0  1 1 0 0 0
     0.0127228994   -0.0698579994   0.00908139033  0  0 2 0 0 0
     -0.381010836    0.0186505445   -0.0118359017  0  0 0 1 0 0
     -0.116489788    -0.125809736     0.226103073  0  1 0 1 0 0
    -0.0164455769     0.727503728    -0.897991279  0  0 1 1 0 0
      0.216930026    0.0426811653    -0.267395819  0  0 0 2 0 0
    0.00501766789      1.06152677     -2.84733317  0  0 0 0 1 0
     -0.594389827     0.248425606    -0.130301798  0  1 0 0 1 0
      0.120236512     0.108174716     0.226851269  0  0 1 0 1 0
      0.639467873    -0.995184398     0.598938259  0  0 0 1 1 0
      -0.20133401    0.0371614135    -0.425565065  0  0 0 0 2 0
     -0.776740385               0               0  0  0 0 0 0 1
  -6.205838e-17  2.9769892e-16 -8.6149145e-16      0  1 0 0 0 1
 -4.9908869e-17 -7.4546686e-17  1.4053655e-16      0  0 1 0 0 1
 -2.3530251e-17  5.6125253e-17 -1.2451422e-16      0  0 0 1 0 1
  1.0374349e-16 -4.6903109e-17  1.4431171e-16      0  0 0 0 1 1
 -1.6924131e-16 -1.7710198e-17  4.5695892e-17      0  0 0 0 0 2


bb.forwardoptics_order = 2

bb.forwardoptics_parameters = 
      0.17777234     0.0071501985       0.18704399     0.0016460064  0 0 0 0 0
       2.8112393      0.042534912       0.95348005      0.022438769  1 0 0 0 0
      0.45344244     -0.063656742       0.09498692     -0.016287817  2 0 0 0 0
     -0.15242958        2.7050889     -0.013476982       0.98500781  0 1 0 0 0
    -0.021002262       -0.1036081      0.099743503      -0.18379609  1 1 0 0 0
      -0.5119296       0.18952198     -0.052954956       0.16113846  0 2 0 0 0
    -0.060144649       0.90810719     -0.020415414     -0.033220161  0 0 1 0 0
     -0.77545842      -0.11985537        -0.265978      -0.11522954  1 0 1 0 0
     -0.41500439       0.41271727     0.0026560606       0.26118401  0 1 1 0 0
    -0.040220411       0.16427851    -0.0063582799      0.070314015  0 0 2 0 0
     -0.22884343      -0.01442955      -0.32366079    -0.0011814136  0 0 0 1 0
     -0.17494673      -0.10470182      -0.17404929     -0.054029942  1 0 0 1 0
       0.3068615       0.15368592      0.035627406       0.20863045  0 1 0 1 0
      0.10883782       0.23076801      0.051398307       0.16261678  0 0 1 1 0
     0.010998779      0.018765835      0.039958396     0.0043385091  0 0 0 2 0
       1.8137435     -0.052135006       0.45112371     -0.019355963  0 0 0 0 1
     -0.15488435      -0.21179024       -0.5838978     -0.081788237  1 0 0 0 1
     -0.51601256       0.25587812       -1.0503139       0.23935687  0 1 0 0 1
      0.96992468       0.28111294      -0.72876774       0.18088207  0 0 1 0 1
     -0.34886017      0.070426927      -0.44995393      0.024582746  0 0 0 1 1
       1.1328192      -0.23611212        1.6597674      -0.13326304  0 0 0 0 2


bb.frontconstraint_x0 = 0.054
bb.frontconstraint_y0 = -0.009
bb.backconstraint_x0 = 0.003
bb.backconstraint_y0 = 0.002

bb.frontconstraintwidth_x = 0.15
bb.frontconstraintwidth_y = 0.11
bb.backconstraintwidth_x = 0.05
bb.backconstraintwidth_y = 0.06


--------[ 2023-02-27 22:55:00 ] # start zero-field running for optics-Holly to update tonight

#bb.frontconstraint_x0 = -0.0656
bb.frontconstraintwidth_x = 0.75
bb.frontconstraintwidth_y = 0.25	

#-------[ 2023-02-27 XX:07:00 ] # back to full-field running:-Holly to update tonight

#bb.frontconstraint_x0 = 0.0443
#bb.frontconstraintwidth_x = 0.15
#bb.frontconstraintwidth_y = 0.11	

--------[ 2023-03-01 23:23:00 ] # start zero-field running

bb.frontconstraintwidth_x = 0.75
bb.frontconstraintwidth_y = 0.25

-------[ 2023-03-02 02:47:00 ] # back to full-field running

#bb.frontconstraint_x0 = 0.0523




-------[ 2023-09-01 00:00:00 ] # GEN-4b start

# new zero-field alignment run 5802:
bb.gemorigin_xyz = -0.20834 0.04382 2.76918
bb.gemtheta = 8.8862
bb.gemphi = 178.185
# NOTE: ZSIEVE from fit = 1.2475 m
# NOTE: mag dist from fit = 1.6166 m


bb.optics_order = 2

bb.preconflag = 1

bb.use_beampos = 0

bb.A_pth1 = 0.287186374
bb.B_pth1 = 0.798543608
bb.C_pth1 = 0.0
bb.A_pvy = 0
bb.B_pvy = 0

bb.optics_parameters = 
    -0.0176531785  -0.00510513983   0.00263487381               0  0 0 0 0 0
      0.511806258  0.000106894428    0.0102777237               0  1 0 0 0 0
      0.155649419 -0.000444941828    0.0623670296               0  2 0 0 0 0
     0.0230488533   -0.0476096357      1.11054255               0  0 1 0 0 0
     -0.279295715   -0.0999052584     0.203867177               0  1 1 0 0 0
   0.000374577155    0.0596105215     0.046505425               0  0 2 0 0 0
      -0.44461558   0.00415893094   -0.0274930007               0  0 0 1 0 0
      -1.13204761    0.0184667015    -0.369302116               0  1 0 1 0 0
     0.0475284671     0.389355844    -0.768725995               0  0 1 1 0 0
       1.74771579   -0.0610532343     0.524905167               0  0 0 2 0 0
    -0.0542241635      1.03774377     -2.81720359               0  0 0 0 1 0
      0.758608583    0.0603099828    -0.244839282               0  1 0 0 1 0
    -0.0383683257    -0.249503786   -0.0383134003               0  0 1 0 1 0
     -0.177740876    -0.400519519      0.70739614               0  0 0 1 1 0
      0.078030812     0.573010167    -0.445409316               0  0 0 0 2 0
   -0.00356234478               0               0               0  0 0 0 0 1
    -6.205838e-17   2.9769892e-16  -8.6149145e-16 		0  1 0 0 0 1
   -4.9908869e-17  -7.4546686e-17   1.4053655e-16  		0  0 1 0 0 1
   -2.3530251e-17   5.6125253e-17  -1.2451422e-16  		0  0 0 1 0 1
    1.0374349e-16  -4.6903109e-17   1.4431171e-16  		0  0 0 0 1 1
   -1.6924131e-16  -1.7710198e-17   4.5695892e-17  		0  0 0 0 0 2


bb.forwardoptics_order = 2

bb.forwardoptics_parameters = 
      0.13993254      0.010122906       0.17676652     0.0059601327  0 0 0 0 0
       2.8500033      0.018592702        1.0066055     0.0054497893  1 0 0 0 0
      0.46363686      0.033879214       0.06186756     0.0074107279  2 0 0 0 0
    -0.012456988        2.7414466    0.00067700711        1.0154482  0 1 0 0 0
     -0.17134929       0.40633772    -0.0053598305      0.017539783  1 1 0 0 0
    -0.027649108      -0.75200668     -0.058186955      -0.39571794  0 2 0 0 0
     0.024773942       0.97944242     -0.002009731    -0.0027626971  0 0 1 0 0
      0.67888449      0.084460945    -0.0054441668      0.043449428  1 0 1 0 0
     0.059440468      -0.39747948      0.010737805     -0.093935258  0 1 1 0 0
   -0.0055160123      -0.19033121     0.0047559046     -0.058689536  0 0 2 0 0
    -0.077852434     0.0063003429      -0.28511545    -0.0032802532  0 0 0 1 0
      -0.2423687     -0.052372941       -0.2817366     -0.017276983  1 0 0 1 0
     0.011203894      0.047009143     0.0049931965       0.12486913  0 1 0 1 0
    -0.069147681      0.066906169     0.0077431323      0.084057232  0 0 1 1 0
     -0.14305581    -0.0077037094     0.0059194357     0.0037794889  0 0 0 2 0
      0.72632487      -0.10486724     -0.016451664     -0.092837411  0 0 0 0 1
      0.54896016     -0.071018299      0.059581761     -0.011090594  1 0 0 0 1
      0.17030635       0.15788978     0.0060754121       0.10845488  0 1 0 0 1
      0.47456575      0.060111862      0.014869595      0.089675733  0 0 1 0 1
        -0.50279      0.014872153      0.054740526      0.036410311  0 0 0 1 1
     0.016348603     -0.091233182      -0.12301598     -0.033432539  0 0 0 0 2



bb.frontconstraint_x0 = 0.05766

bb.frontconstraintwidth_x = 0.15
bb.frontconstraintwidth_y = 0.11	

bb.frontconstraint_x0 = -0.004
bb.frontconstraint_y0 = 0.012
bb.backconstraint_x0 = 0.00
bb.backconstraint_y0 = 0.00

bb.frontconstraintwidth_x = 0.06
bb.frontconstraintwidth_y = 0.14
bb.backconstraintwidth_x = 0.05
bb.backconstraintwidth_y = 0.07

-------[ 2023-10-19 14:36:00 ] # getting ready for zero-field, straight-through running:

#bb.frontconstraintwidth_x = 0.75
bb.frontconstraint_x0 = -0.09
bb.frontconstraintwidth_x = 0.25
bb.frontconstraintwidth_y = 0.15

--------[ 2023-10-19 15:38:00 ] # back to full field

bb.frontconstraint_x0 = -0.004
bb.frontconstraintwidth_x = 0.06
bb.frontconstraintwidth_y = 0.14

bb.frontconstraint_x0 = 0.05766

#bb.backconstraintwidth_x = 0.12
#bb.backconstraintwidth_y = 0.06

bb.frontconstraintwidth_x = 0.15
bb.frontconstraintwidth_y = 0.11	

--------[ 2023-11-01 00:00:00 ] # Start pion-ALL

bb.backconstraintwidth_x = 0.06
bb.backconstraintwidth_y = 0.06

bb.frontconstraintwidth_x = 1.0
bb.frontconstraintwidth_y = 0.12

# new 4th-order simulation optics for pion-ALL with BB at 32 degrees: should be good down to ~0.2 GeV momentum

bb.preconflag = 1

bb.A_pth1 =       0.2775655
bb.B_pth1 =        0.974132
bb.C_pth1 = 0.0

bb.optics_order = 4

bb.optics_parameters = 
   -0.016425868  0.00030238103 -0.00044653361  -0.0067883894  0 0 0 0 0
     0.50499263    0.000138289  -0.0012202667   -0.046312488  1 0 0 0 0
   -0.035369851  -0.0038768717  -0.0033746543    0.050674374  2 0 0 0 0
    0.022067708    0.010092099   0.0061735399     0.08833376  3 0 0 0 0
   -0.025728178     0.05342967   -0.072306819     -1.3062173  4 0 0 0 0
    0.013659192   -0.057915569      1.1280166   -0.013701113  0 1 0 0 0
    -0.48206209    -0.13802045     0.36940044     0.53627646  1 1 0 0 0
     0.10665749     0.66925242     -1.1706905    -0.50449593  2 1 0 0 0
      0.5647705      1.0272192      -2.489969    -0.17252633  3 1 0 0 0
   -0.042429774    -0.29056635     0.41008801    -0.36569964  0 2 0 0 0
     0.41061084     0.37370462     -1.0683995     -1.6186244  1 2 0 0 0
    -0.99784496     -0.7604434      1.1619363      27.781547  2 2 0 0 0
     0.28842412      1.8404282     -5.9072662      2.1213214  0 3 0 0 0
      6.4873796       20.77292     -46.766151     -13.760583  1 3 0 0 0
      16.462263      67.857007     -104.29306     -10.737402  0 4 0 0 0
     -0.4022033  0.00018839424  0.00010014863      0.1454895  0 0 1 0 0
    0.034052395    0.011582098    0.034492627     0.11491865  1 0 1 0 0
   -0.071001316     -0.0678897   -0.076839203    -0.55353588  2 0 1 0 0
     0.20827598    -0.18687215     0.28384097      2.9845561  3 0 1 0 0
     0.38737238     0.39947483    -0.85639293    -0.41693096  0 1 1 0 0
    0.025593469     -3.1516553      5.4740245      1.3054592  1 1 1 0 0
     -2.5027333      0.2795176      1.4079732    -0.76309521  2 1 1 0 0
    -0.61747744    -0.56523675      2.1306728      1.9054066  0 2 1 0 0
      1.8595053     0.51347487     -2.0246645       -33.7772  1 2 1 0 0
     -15.159228     -55.097799      125.45371      17.150945  0 3 1 0 0
    0.018746801  -0.0070153013    -0.05486925    -0.11049129  0 0 2 0 0
    0.026705887     0.15007768     0.32446075      1.3122199  1 0 2 0 0
    -0.44262094     0.11471554    -0.61107317     -3.5377386  2 0 2 0 0
    -0.12911437      3.4003768     -6.1532207     -1.4378559  0 1 2 0 0
      3.4021207     -5.8609549      7.7052187      3.7623423  1 1 2 0 0
    -0.70578108     -1.8663753      7.7340957      15.246562  0 2 2 0 0
    0.050455079    -0.10192376    -0.39778664     -1.1810153  0 0 3 0 0
     0.36134066      0.1364988      1.0771083      3.5392042  1 0 3 0 0
     -1.0238169      5.7410584      -7.657257     -2.8546279  0 1 3 0 0
    -0.21849591   -0.066160211    -0.96907653     -1.8625683  0 0 4 0 0
   -0.036131634      1.0397141     -2.8330143    0.048589008  0 0 0 1 0
      1.1805297    0.053900873    -0.31801273     -1.3133109  1 0 0 1 0
    -0.15202646    -0.58364359     0.95443863      1.3881335  2 0 0 1 0
    -0.24345956    -0.44865625       1.012248    -0.72387468  3 0 0 1 0
     0.21566596     0.75312114    -0.94953257     0.48654186  0 1 0 1 0
     -1.0854606      -1.120099      3.0397293       3.695737  1 1 0 1 0
       3.314224      3.5747395     -5.3328695     -38.943703  2 1 0 1 0
     -1.8051878     -7.9363112      26.024238     -11.012798  0 2 0 1 0
     -27.286141     -84.637039      190.60763      75.374011  1 2 0 1 0
     -94.540101     -379.40096      545.67789      37.681388  0 3 0 1 0
    -0.96256036    -0.33933837     0.78505474      1.0537219  0 0 1 1 0
    -0.13892046      3.0255253     -4.8883226     -3.4247805  1 0 1 1 0
      1.8353712     -1.9158305      2.3274878      3.9686202  2 0 1 1 0
       1.070733      2.0834089     -6.8712633     -2.0203553  0 1 1 1 0
     -7.9155138     -6.5898517      13.947121      44.232938  1 1 1 1 0
      62.989108      210.61265     -486.07262     -93.863192  0 2 1 1 0
     0.48685423     -3.5466967      5.8618546       3.252847  0 0 2 1 0
     -3.5550105      8.9164981     -13.409272      -9.122963  1 0 2 1 0
      2.7924059        9.41113     -27.822478     -23.664633  0 1 2 1 0
       1.634676     -9.1941831      14.015498      7.3060138  0 0 3 1 0
    -0.15674285    -0.47792001     0.57626787    -0.34420607  0 0 0 2 0
     0.47124349     0.94797952     -2.3552837     -2.5454447  1 0 0 2 0
     -3.1117626     -3.5238508      5.3512162      11.969222  2 0 0 2 0
      2.0879739      12.190576     -39.444764      19.397739  0 1 0 2 0
      32.852492      113.22809     -254.92083     -99.528947  1 1 0 2 0
      201.43513      806.63792     -1099.2861     -74.504411  0 2 0 2 0
    -0.16527713     -2.3697598      6.7060489      2.2552334  0 0 1 2 0
      9.7708771      11.081842     -24.303174      -13.35815  1 0 1 2 0
     -67.834438     -278.23703      640.33455      108.92617  0 1 1 2 0
     -5.8574571      -14.73852        38.6792      25.411736  0 0 2 2 0
    -0.64675943     -7.0274475      22.320964     -12.511216  0 0 0 3 0
     -12.149628     -53.819699      120.77362      41.052453  1 0 0 3 0
     -185.12952     -773.81851      1014.6297      56.777637  0 1 0 3 0
      20.937976      139.19951      -314.7995     -32.676531  0 0 1 3 0
      59.709055      284.86448     -374.89942      14.803229  0 0 0 4 0
  2.2876536e-14  -3.967469e-14  1.0068237e-13  4.5462386e-13  0 0 0 0 1
 -2.4034568e-14 -3.5617471e-14  9.3123847e-14  7.0515415e-13  1 0 0 0 1
  1.2146957e-13   1.036024e-13 -3.4396269e-13 -2.5869501e-12  2 0 0 0 1
 -3.2639521e-14 -2.5792074e-14  1.1665202e-13  1.1771756e-12  3 0 0 0 1
  1.9332255e-14  7.2276946e-14 -1.5240484e-13 -5.3297975e-13  0 1 0 0 1
  1.5115024e-14 -1.4379587e-14  1.3868195e-14 -3.9691787e-13  1 1 0 0 1
 -1.5294161e-14 -1.2766766e-13   2.066968e-13 -1.5552741e-13  2 1 0 0 1
  1.0955108e-14  9.7812325e-14 -1.4945324e-13  1.7528542e-13  0 2 0 0 1
  -2.078068e-14 -2.2589577e-14 -6.2898424e-16  1.7873594e-13  1 2 0 0 1
  1.8133756e-15  -2.674996e-15 -4.2578778e-14 -1.7957007e-14  0 3 0 0 1
  3.3012299e-14   2.454734e-14 -7.1604992e-14 -4.9305462e-13  0 0 1 0 1
  8.2687697e-14  1.4052019e-13 -3.6293773e-13 -1.7692192e-12  1 0 1 0 1
 -6.2212589e-15 -7.0450029e-14  1.0366965e-13  1.0362084e-13  2 0 1 0 1
 -5.2823206e-15  9.9382784e-15 -5.3971784e-14  4.9844476e-16  0 1 1 0 1
  -1.941361e-15 -3.1844069e-14  5.2591425e-14 -7.6078305e-14  1 1 1 0 1
  3.8704089e-14  1.6722463e-13 -2.3245798e-13  5.0153892e-14  0 2 1 0 1
  3.2280331e-14  5.6898824e-14 -1.3193479e-13 -7.4230595e-13  0 0 2 0 1
  4.8997369e-15  -2.893972e-14  5.6846304e-14 -3.9587372e-14  1 0 2 0 1
 -8.7998554e-15 -4.0537274e-14 -1.9066554e-14 -6.0140015e-14  0 1 2 0 1
 -4.3344245e-15 -6.6973093e-14  1.4006448e-13 -9.6506344e-14  0 0 3 0 1
  1.6508875e-14 -3.8958931e-15 -4.1340177e-14 -7.6462658e-13  0 0 0 1 1
  3.7197053e-14  1.4506163e-13 -2.2478865e-13 -1.4402318e-13  1 0 0 1 1
  6.4064951e-15   2.720951e-14 -6.5684646e-14  3.2029909e-14  2 0 0 1 1
 -3.3977537e-17 -1.7401884e-15  2.2542997e-14  4.8567511e-14  0 1 0 1 1
  1.0075953e-14  1.0924782e-13 -2.1595284e-13  2.0541248e-13  1 1 0 1 1
 -4.9908782e-14 -2.1484112e-13  2.9445034e-13   1.536222e-14  0 2 0 1 1
 -1.4984556e-14   4.104552e-15 -1.2375294e-14  6.4789789e-14  0 0 1 1 1
  5.8226898e-15  1.6068605e-14  1.4536074e-14  3.3796877e-15  1 0 1 1 1
  6.6998505e-16  3.5169193e-14  6.1942647e-15  1.0174289e-13  0 1 1 1 1
 -2.2815985e-14 -1.0122187e-13  1.3142036e-13  2.0385579e-15  0 0 2 1 1
 -1.7610092e-14 -9.9360851e-14  1.6954238e-13 -3.7255116e-14  0 0 0 2 1
 -2.0366047e-14 -3.9097891e-14  6.1049966e-14  1.6689661e-13  1 0 0 2 1
 -1.1651624e-16 -7.1720025e-15 -2.9004092e-14 -7.8975476e-15  0 1 0 2 1
  4.3217913e-14  1.8740692e-13 -2.8153704e-13   3.627757e-14  0 0 1 2 1
   1.738763e-14  7.7446134e-14 -1.2891462e-13 -1.6540185e-14  0 0 0 3 1
  5.6268001e-15  6.6319278e-14 -8.1954561e-14  8.5861017e-14  0 0 0 0 2
  5.0388885e-15 -3.9485941e-14   4.894583e-14 -2.2564669e-13  1 0 0 0 2
  4.5764992e-14  2.2654287e-13 -3.6519585e-13  -5.014371e-14  2 0 0 0 2
  6.1464888e-15 -7.4219784e-14  7.3568138e-14 -2.7865854e-13  0 1 0 0 2
  5.0603366e-14  2.2287758e-13 -3.2863492e-13  8.7893246e-15  1 1 0 0 2
  3.0502116e-14   1.254116e-13 -1.9498751e-13 -6.1893747e-15  0 2 0 0 2
 -1.4320382e-14 -9.6054903e-14  1.3133731e-13 -8.5482693e-14  0 0 1 0 2
 -1.6043092e-14 -4.3094795e-14  4.9811895e-14 -3.0528416e-15  1 0 1 0 2
 -5.8612431e-14 -2.3670949e-13  3.3282851e-13  2.9162862e-14  0 1 1 0 2
 -2.7631495e-14 -8.9880153e-14  1.4111953e-13  3.8558223e-14  0 0 2 0 2
 -5.5428931e-15  -6.161343e-14  9.3979322e-14 -1.0679199e-13  0 0 0 1 2
  5.8533143e-15  2.6454538e-14 -1.6477174e-14  4.7672745e-14  1 0 0 1 2
 -1.0034071e-13  -4.159905e-13  5.7942803e-13  4.0729217e-14  0 1 0 1 2
  4.1847829e-15  9.0211787e-15 -1.1468054e-15  2.2289551e-14  0 0 1 1 2
  7.9181194e-14  3.1888677e-13 -5.2442332e-13 -7.5843426e-14  0 0 0 2 2
  1.2271468e-14  4.3563452e-14 -7.8402902e-14  -2.802392e-14  0 0 0 0 3
  3.3777218e-14  1.3827478e-13 -1.3737491e-13  1.8805521e-14  1 0 0 0 3
  3.6291273e-15  9.3178701e-15 -3.0819897e-14 -1.4492029e-14  0 1 0 0 3
 -6.3321856e-15 -3.1635581e-14  2.6653967e-14  -1.089265e-14  0 0 1 0 3
 -5.5229015e-15 -3.0364813e-14  1.4847637e-14 -1.6463397e-14  0 0 0 1 3
 -2.1823689e-14 -9.1681391e-14  1.1067017e-13 -1.0233478e-16  0 0 0 0 4

---------[ 2024-04-01 00:00:00 ] # start GEN-RP

# Although BigBite has moved, we start with zero-field alignment from GEN Kin 4b,
# but shift Z of GEM origin upstream by 8 cm to reflect change
# in magnet distance: 2.769 --> 2.689
# we'll keep same theta and phi angles initially
#bb.gemorigin_xyz = -0.20834 0.04382 2.68918
#bb.gemtheta = 8.8862
#bb.gemphi = 178.185

# New Zero-field alignment result from runs 301,302 in GEN-RP:
# Implied ZSIEVE and magnet distance from fit = 1.1734 and 1.5426 m, respectively
bb.gemorigin_xyz = -0.207972 0.028746 2.690211
bb.gemtheta = 8.8432
bb.gemphi = 180.6652

# initial guesses at BigBite GEM constraint centering and widths:
#bb.frontconstraint_x0 = 0.033

#bb.frontconstraint_y0 = 0.0

# update based on initial BBCAL results:
bb.frontconstraint_x0 = 0.047
bb.frontconstraint_y0 = -0.0154

bb.backconstraint_x0 = 0.0044
bb.backconstraint_y0 = -0.0016

bb.frontconstraintwidth_x = 0.09
bb.frontconstraintwidth_y = 0.075
bb.backconstraintwidth_x = 0.055
bb.backconstraintwidth_y = 0.07

# Starting optics model from g4sbs simulation, AJRP 2024-04-10:

bb.preconflag = 1

bb.A_pth1 =       0.2775655
bb.B_pth1 =         0.93602
bb.C_pth1 = 0.0

bb.optics_order = 2

bb.optics_parameters =
   -0.017093122  0.00013669289 -0.00026716466  -0.0091404224  0 0 0 0 0
     0.52787668   0.0011979984  -0.0025167207   -0.050854194  1 0 0 0 0
   -0.043886806   0.0015435144  -0.0037217051   0.0045873957  2 0 0 0 0
      0.0134391   -0.033980363      1.0691331  -0.0062395584  0 1 0 0 0
    -0.32999594    0.082724431    -0.10479401     0.34905165  1 1 0 0 0
   0.0084024758   0.0087708513   -0.015502512     0.44288785  0 2 0 0 0
    -0.42185557  -0.0020033836   0.0038942503     0.15018826  0 0 1 0 0
    0.058035828   -0.003147156   0.0065310859    0.055636803  1 0 1 0 0
     0.25826697   -0.091010653     0.17961255    -0.29894162  0 1 1 0 0
   -0.010173329 -0.00028930794   0.0039762504    0.089169757  0 0 2 0 0
    -0.03232693      1.0013201     -2.6575798     0.02790429  0 0 0 1 0
     0.82570667    -0.21387277     0.23428603    -0.85519686  1 0 0 1 0
   0.0013918758   -0.056319811     0.12559268    -0.30240223  0 1 0 1 0
    -0.66174902     0.33515466    -0.62618824      0.7608523  0 0 1 1 0
    0.058284612    0.080192266    -0.20368998    -0.29495728  0 0 0 2 0
  4.7945402e-15 -4.8104375e-17  3.0957161e-16  1.0404945e-16  0 0 0 0 1
   2.675207e-16  8.1455387e-17 -2.8518809e-17  6.1444596e-17  1 0 0 0 1
  2.3501977e-16 -6.0662964e-17  9.5765391e-17 -2.2352775e-16  0 1 0 0 1
  6.9907979e-17  1.5692285e-16  5.2089024e-17 -1.0359009e-16  0 0 1 0 1
 -1.7970811e-16 -7.7398411e-17  7.9166338e-18  2.9142471e-17  0 0 0 1 1
  1.8773094e-16 -2.6885084e-17  4.2139145e-17 -6.5964416e-17  0 0 0 0 2

# forward optics model from simulation, AJRP 2024-04-10:
bb.forwardoptics_order = 2

bb.forwardoptics_parameters =
     0.17191454 -6.8486727e-06     0.17466279  7.7761495e-05  0 0 0 0 0
      2.6967797  -0.0006932003     0.98405158 -0.00062157801  1 0 0 0 0
     0.33070969  -0.0014432878   0.0079105985   -0.003406313  2 0 0 0 0
 -0.00027735556      2.6990932   -0.000993428      1.0703704  0 1 0 0 0
  -0.0046279711    0.031001349   -0.010560176   -0.080137714  1 1 0 0 0
    -0.48514724  -0.0036636186    -0.29516138   0.0024620434  0 2 0 0 0
 -0.00083098425      1.0087081  -0.0015766709    0.028966072  0 0 1 0 0
      1.0424046    -0.23246797   -0.069116778    -0.13866188  1 0 1 0 0
    -0.28292957   -0.021463175    -0.23194896 -0.00021606474  0 1 1 0 0
   -0.064386202  -0.0013740033   -0.059070087  -0.0045289791  0 0 2 0 0
    -0.22127485 -0.00011329393    -0.27790034 -0.00052035415  0 0 0 1 0
    -0.18591581 -0.00017862403    -0.22739885  -0.0018107515  1 0 0 1 0
  -0.0015843508    0.016440482   -0.002642728    0.030542575  0 1 0 1 0
   0.0015401674    0.016478725  -0.0009819358    0.019108843  0 0 1 1 0
   0.0024857137 -0.00011326748   0.0042292656  0.00018640286  0 0 0 2 0
 -3.6924961e-12  1.2317909e-13  2.6066399e-13  4.8493226e-13  0 0 0 0 1
  1.7953528e-13 -1.9981328e-15 -1.4588036e-14 -2.2966002e-14  1 0 0 0 1
 -2.0233707e-14  8.4809952e-16   1.545358e-15  2.7311583e-15  0 1 0 0 1
  1.4651523e-14 -4.8347595e-16 -9.3835136e-16 -1.8446314e-15  0 0 1 0 1
 -1.8932892e-12  6.5906601e-14  1.3599124e-13  2.4986205e-13  0 0 0 1 1
 -1.9538371e-16 -9.9286714e-17  1.3550367e-16  2.9860708e-17  0 0 0 0 2



---------[ 2024-04-22 10:30:00 ] # start zero-field running on single-foil

bb.frontconstraintwidth_x = 0.12
bb.frontconstraint_x0 = -0.122
bb.frontconstraintwidth_y = 0.1


---------[ 2024-04-22 13:11:00 ] # back to full-field running

bb.frontconstraint_x0 = 0.047
bb.frontconstraintwidth_y = 0.075
bb.frontconstraintwidth_x = 0.09

---------[ 2024-05-14 18:00:00 ] # start pion-KLL: widen front constraint for charged pion tracking

bb.frontconstraintwidth_x = 0.2
